<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Python3è¿›é˜¶ç¬”è®°]]></title>
    <url>%2Fadvance-python%2F</url>
    <content type="text"><![CDATA[Pythonè¿›é˜¶ç¬”è®° å†…å®¹ä»¥ç¼©è¿›å½¢å¼åˆ†å±‚ æœ‰äº›çŸ¥è¯†ç‚¹ç‚¹åˆ°ä¸ºæ­¢ pythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ pythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ å¯èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ å¯ä»¥æ·»åŠ åˆ°é›†åˆå¯¹è±¡ä¸­ å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•° å¯ä»¥å½“åšå‡½æ•°çš„è¿”å›å€¼ type object class type-&gt;class-&gt;obj objectæ˜¯æœ€é¡¶å±‚åŸºç±» typeä¹Ÿæ˜¯ä¸€ä¸ªç±» åŒæ—¶typeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ typeç”¨äºå®ä¾‹ä¸€åˆ‡å¯¹è±¡ type()å‡½æ•°ç”¨äºæŸ¥çœ‹å®ä¾‹ç”±å“ªä¸€å¯¹è±¡ç”Ÿæˆ .__bases__å±æ€§ç”¨äºæŸ¥çœ‹å¯¹è±¡ä¸Šçº§ç»§æ‰¿çš„æ˜¯å“ªä¸€å¯¹è±¡ æ­¤å¤„æœ‰å›¾ pythonä¸­çš„åˆ›å»ºçš„å†…ç½®ç±»å‹ å¯¹è±¡çš„ä¸‰ä¸ªç‰¹å¾ èº«ä»½ ä¹Ÿå°±æ˜¯å†…å­˜åœ°å€ ç”¨id()å‡½æ•°è®¿é—® ç±»å‹ æ•°æ®ç±»å‹ å€¼ èµ‹å€¼ Noneç±»å‹ï¼ˆå…¨å±€åªæœ‰ä¸€ä¸ªï¼‰ å³å†…å­˜åœ°å€ç›¸åŒ æ•°å€¼ç±»å‹ int float complex bool è¿­ä»£ç±»å‹ åºåˆ—ç±»å‹ list bytes byte array memoryview range tuple str array æ˜ å°„ç±»å‹ dict é›†åˆç±»å‹ set frozenset ä¸Šä¸‹æ–‡ç®¡ç†ç±»å‹ withè¯­å¥ å…¶ä»– æ¨¡å—ç±»å‹ classå’Œå®ä¾‹ å‡½æ•°ç±»å‹ æ–¹æ³•ç±»å‹ objectå¯¹è±¡ typeç±»å‹ ellipsisç±»å‹ notimplementedç±»å¯¹è±¡ é­”æ³•å‡½æ•° é­”æ³•å‡½æ•°å®šä¹‰ ç±»ä¸­ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„å‡½æ•° æ˜¯pythonå†…ç½®çš„ é­”æ³•å‡½æ•°å½±å“pythonè¯­æ³• pythonè¯­æ³•å®é™…è°ƒç”¨é­”æ³•å‡½æ•° é­”æ³•å‡½æ•° éæ•°å­¦è¿ç®— å­—ç¬¦ä¸²è¡¨ç¤º __repr__ åœ¨debugæ¨¡å¼è°ƒç”¨ è¾“å‡ºå¯¹è±¡ __str__ é‡å†™å­—ç¬¦ä¸² å†…ç½®å‡½æ•°print()é»˜è®¤è°ƒç”¨å†…ç½®å‡½æ•°str() æ•°å­¦è¿ç®— æ·±å…¥ç±»å’Œå¯¹è±¡ é¸­å­ç±»å‹å’Œå¤šæ€ å½“çœ‹åˆ°ä¸€åªé¸Ÿèµ°èµ·æ¥åƒé¸­å­ æ¸¸æ³³èµ·æ¥åƒé¸­å­ å«èµ·æ¥åƒé¸­å­ é‚£ä¹ˆè¿™åªé¸Ÿå°±å¯ä»¥è¢«ç§°ä¸ºé¸­å­ æ–¹æ³•ç›¸å…³ æŸä¸ªç±»æœ‰æŸä¸ªæŒ‡å®šæ–¹æ³• é‚£ä¹ˆå°±è¢«ç§°ä¸ºæŸç±»å‹ å› ä¸ºpythonåŠ¨æ€è¯­è¨€çš„å…³ç³» æ— æ³•ä»ç±»çš„ç±»å‹æ¥åˆ¤æ–­å¹¶å®ç°å¤šæ€ æ‰€ä»¥ä½¿ç”¨é¸­å­ç±»å‹æ¥å®ç°å¤šæ€ æŠ½è±¡åŸºç±»(abcæ¨¡å—) hasattr(obj,â€funâ€) åˆ¤æ–­æŸä¸ªå¯¹è±¡ä¸­æ˜¯å¦æœ‰æŸä¸ªæ–¹æ³• isinstance(obj,otherobj) é€šè¿‡ç»§æ‰¿é“¾ åˆ¤æ–­æŸä¸ªç±»æ˜¯å¦å±äºæŸä¸ªç±» æŠ½è±¡åŸºç±»çš„ä½¿ç”¨ import abcåŒ… ç±»ç»§æ‰¿ mataclass=abc.ABCMeta ç”¨@abc.abstractmathodè£…é¥°å™¨è£…é¥°æ–¹æ³• isinstanceå’Œtype type()åˆ¤æ–­å¯¹è±¡id isinstance() åˆ¤æ–­ç»§æ‰¿ç»§æ‰¿é“¾ ç±»å˜é‡å’Œå®ä¾‹å˜é‡ selfå‚æ•° ä¼ é€’çš„æ˜¯ç±»å®ä¾‹ å®ä¾‹å˜é‡å’Œç±»å˜é‡æ˜¯ç‹¬ç«‹çš„ åœ¨å®ä¾‹ä¸­ä¿®æ”¹ç±»å˜é‡å¹¶ä¸ä¼šæ”¹å˜ç±»çš„ç±»å˜é‡ ä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹ä¼šå…±ç”¨åŒä¸€ä¸ªå®ä¾‹ç±»å˜é‡ ç±»å±æ€§å’Œå®ä¾‹å±æ€§ä»¥åŠæŸ¥æ‰¾é¡ºåº MROç®—æ³• DFSç®—æ³• ç»§æ‰¿å…³ç³»æœ‰è±å½¢æ—¶ å­˜åœ¨æ— æ³•è¾¾åˆ°é‡å†™æ–¹æ³•çš„æ•ˆæœ BFSç®—æ³• ç»§æ‰¿å…³ç³»ä¸ºYå½¢æ—¶ å½“å‡ºç°ç»§æ‰¿æ–¹æ³•é‡åæ—¶ ä¼˜å…ˆç»§æ‰¿çš„ç±»çš„æ–¹æ³•ä¸èƒ½ä¼˜å…ˆä½¿ç”¨ C3ç®—æ³•(python2.3ä¹‹å) ä½¿ç”¨__mro__å±æ€§æŸ¥çœ‹ç±»çš„æŸ¥æ‰¾é¡ºåº é™æ€æ–¹æ³• ç±»æ–¹æ³•ä»¥åŠå¯¹è±¡æ–¹æ³•åŠå‚æ•° æ–¹æ³•å‰ç”± def å…³é”®å­—ä¿®é¥° é™æ€æ–¹æ³•ç”¨@staticmethodå®Œæˆåˆå§‹åŒ– é€šå¸¸åœ¨ä¸è¿”å›ç±»çš„æƒ…æ™¯ä¸‹ä½¿ç”¨ æ²¡æœ‰å®ä¾‹å‚æ•°self ç±»æ–¹æ³•ç”¨@classmethodå®Œæˆåˆå§‹åŒ– é€šå¸¸åœ¨è¿”å›ç±»çš„æƒ…æ™¯ä¸‹ä½¿ç”¨ ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„æ˜¯ç±»æœ¬èº« é€šå¸¸å†™æˆcls å®ä¾‹æ–¹æ³• ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„æ˜¯å®ä¾‹æœ¬èº« é€šå¸¸å†™ä¸º self æ•°æ®å°è£…å’Œç§æœ‰å±æ€§ åœ¨å¯¹è±¡å˜é‡æˆ–è€…å¯¹è±¡æ–¹æ³•å‰åŠ åŒä¸‹åˆ’çº¿ å¦‚ __method æˆ– __var pythonè‡ªåŠ¨æ›´åä¸º _class__method æˆ–è€… _class__var çš„å½¢å¼è¾¾åˆ°éšè—çš„æ•ˆæœ ä½†ä»ç„¶å¯ä»¥é€šè¿‡æ›´ååçš„å½¢å¼è®¿é—® pythonå¯¹è±¡çš„è‡ªçœæœºåˆ¶ é€šè¿‡__dict__æŸ¥è¯¢å±æ€§ ä¼šåˆ—å‡ºéƒ¨åˆ†å±æ€§å’Œå€¼ å¯ä»¥é€šè¿‡è¯¥å±æ€§ ä»¥å­—å…¸æ˜¯å½¢å¼è®¿é—®ã€æ·»åŠ å±æ€§æˆ–è€…ä¿®æ”¹å€¼ é€šè¿‡dir()æ–¹æ³• åªåˆ—å‡ºå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ superçœŸçš„æ˜¯è°ƒç”¨çˆ¶ç±»å—ï¼Ÿ superæ‰§è¡Œé¡ºåº è°ƒç”¨çš„æ˜¯MROé¡ºåºçš„ä¸‹ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•° mixingç»§æ‰¿æ¨¡å¼ mixingç±»åŠŸèƒ½å•ä¸€ ä¸å’ŒåŸºç±»å…³è” å¯ä»¥å’Œä»»æ„åŸºç±»å…³è” åŸºç±»å¯ä»¥ä¸å’Œmixinå…³è”å°±é¥åˆå§‹åŒ–æˆåŠŸ åœ¨mixinä¸­ä¸è¦ä½¿ç”¨superæ–¹æ³• pythonä¸­çš„withè¯­å¥ ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®® å®ç°ä¸¤ä¸ªé­”æ³•å‡½æ•° __enter__() åœ¨withè¯­å¥ä¸­ è¿›å…¥æ—¶è°ƒç”¨ __exit__() åœ¨withè¯­å¥ä¸­ ç»“æŸæ—¶è°ƒç”¨ withâ€¦as..è¯­å¥ withåçš„è¯­å¥(é€šå¸¸å®ä¾‹ä¸€ä¸ªå¯¹è±¡)æ‰§è¡Œåè°ƒç”¨__enter__()é­”æ³•å‡½æ•° å¹¶è¿”å›å€¼ __enter__()é­”æ³•å‡½æ•°æ‰§è¡Œåçš„è¿”å›å€¼èµ‹å€¼ç»™asåçš„å˜é‡ asåçš„å˜é‡å¯ä»¥åœ¨ä¸‹è¾¹çš„ä»£ç å—ä¸­è°ƒç”¨ è¯­å¥å—æ‰§è¡Œå®Œåè°ƒç”¨ __exit__() é­”æ³•å‡½æ•° withè¯­å¥æ•è·åˆ°å¼‚å¸¸åˆ™ç›´æ¥æ‰§è¡Œ__exit__() é­”æ³•å‡½æ•° contextlibç®€åŒ–ä¸Šä¸‹æ–‡ç®¡ç†å™¨ contextlibçš„ä½¿ç”¨ import context lib åŒ… ä½¿ç”¨@contextlib.contextmanagerè£…é¥°æ–¹æ³• é…åˆyieldä½¿ç”¨ yieldå‰çš„ä»£ç å—ç›¸å½“äº__enter__()é­”æ³•å‡½æ•°ä¸­çš„ä»£ç å— yieldè¿”å›ä¸€ä¸ªå€¼ yieldåçš„ä»£ç å—ç›¸å½“äº__exit__() é­”æ³•å‡½æ•°ä¸­çš„ä»£ç å— è‡ªå®šä¹‰åºåˆ—ç±» åºåˆ—ç±»å‹çš„åˆ†ç±» å®¹å™¨åºåˆ— (å¯å­˜æ”¾ä»»æ„ç±»å‹çš„å®¹å™¨ ) list tuple deque æ‰å¹³åºåˆ—(æŒ‡å®šæ•°æ®ç±»å‹) str bytes byte array array.array å¯å˜åºåˆ— list deque byte array array ä¸å¯å˜åºåˆ— str tuple bytes pythonä¸­åºåˆ—ç±»å‹çš„abcç»§æ‰¿å…³ç³» åœ¨from collection import abc (å®¹å™¨ç›¸å…³çš„æŠ½è±¡åŸºç±»)ä¸­ Sequence(ä¸å¯å˜åºåˆ—) ç»§æ‰¿Reversible å’Œ Collection Collectionç»§æ‰¿Sized Iterableå’ŒContainer Sized å®ç° __len__ æ–¹æ³• è®¡ç®—é•¿åº¦ Iterable å®ç°__iter__ æ–¹æ³• è¿­ä»£å™¨ ç”¨äºforå¾ªç¯ Container å®ç° __contains__ æ–¹æ³• ç”¨äºä½¿ç”¨IN åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ MutableSequence(å¯å˜åºåˆ—) å¿…é¡»å®ç°__new__ __init__ __getitem__ __setitem__ __delitem__ __len__ insert() æ–¹æ³• listä¸­extendæ–¹æ³•åŒºåˆ« +è¿ç®— åªèƒ½ç›¸åŠ ç›¸åŒçš„åºåˆ—ç±»å‹ è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ ä¹Ÿå°±æ˜¯è¯´id()ä¸åŒ +=å°±åœ°åŠ  å®é™…è°ƒç”¨MutableSequence.__iadd__(self,values)æ–¹æ³• __iadd__ åˆè°ƒç”¨ self.extend(values) æ–¹æ³• self.extend(values) é€šè¿‡forå¾ªç¯è¿­ä»£å‡ºæ¯ä¸ªå…ƒç´  ç„¶åä½¿ç”¨self.append()æ–¹æ³•è¿½åŠ æ¯ä¸ªå…ƒç´  ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç›¸åŠ ä¸åŒåºåˆ—ç±»å‹ å¯¹åŸæ¥çš„å®ä¾‹ç›¸åŠ  ä¹Ÿå°±æ˜¯è¯´id()ç›¸åŒ å®ç°å¯åˆ‡ç‰‡çš„å¯¹è±¡(ä¼šè¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨) å¯ä»¥åšå–å€¼ èµ‹å€¼ åˆ é™¤æ“ä½œ [start:end:step] start è¡¨ç¤ºåˆ‡ç‰‡å¼€å§‹ä½ç½® é»˜è®¤ä¸º0 end è¡¨ç¤ºåˆ‡ç‰‡æˆªæ­¢ä½ç½® é»˜è®¤ä¸ºåˆ—è¡¨é•¿åº¦ step è¡¨ç¤ºæ­¥é•¿ é»˜è®¤ä¸º1 åˆ‡ç‰‡éœ€å®ç°çš„__getitem__(self,item)æ–¹æ³• å¦‚æœä»¥åˆ‡ç‰‡è®¿é—® itemä¸ºslice å³åˆ‡ç‰‡å¯¹è±¡ å¦‚æœä»¥ç´¢å¼•è®¿é—® itemä¸ºint å³ç´¢å¼•ä½ç½® bisectç»´æŠ¤å·²æ’åºåºåˆ— import bisect å¯¼å…¥bisectåŒ… ç”¨æ¥å¤„ç†å·²æ’åºçš„åºåˆ— bisectæ¨¡å— insortæ–¹æ³•ç”¨äºæ’å…¥é»˜è®¤ä¸ºinsort_right bisectæ–¹æ³•ç”¨äºæŸ¥æ‰¾(ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾) é»˜è®¤ä¸ºbisect_right è¿˜æœ‰insort_leftå’Œbisect_leftæ–¹æ³• å³å½“é‡åˆ°ç›¸åŒå…ƒç´ æ—¶ æ’å…¥ä»¥æœ‰ç›¸åŒå…ƒç´ çš„å·¦è¾¹ ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬ä¸è¯¥ä½¿ç”¨åˆ—è¡¨ arrayå’Œlistçš„ä¸€ä¸ªé‡è¦çš„åŒºåˆ« arrayåªèƒ½å­˜æ”¾æŒ‡å®šçš„æ•°æ®ç±»å‹ å…¶æ•ˆç‡é«˜ åˆ—è¡¨æ¨å¯¼å¼ã€ç”Ÿæˆå™¨è¡¨è¾¾å¼ã€å­—å…¸æ¨å¯¼å¼ åˆ—è¡¨æ¨å¯¼å¼(åˆ—è¡¨æ¨å¯¼å¼æ€§èƒ½é«˜äºåˆ—è¡¨æ“ä½œ) [ for in if ] è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ ç”Ÿæˆå™¨è¡¨è¾¾å¼ ( for in if ) æ³¨ï¼šè¿”å›çš„æ˜¯ generator ç”Ÿæˆå™¨ç±» å­—å…¸æ¨å¯¼å¼ { key:value for in if } æ³¨ï¼š æ¨å¯¼å¼ä¸­çš„keyå’Œvalueæ˜¯é€šå¸¸çš„å‘½å æ˜¯ä¸å›ºå®šçš„ é›†åˆæ¨å¯¼å¼ { one_value for in if } åªè¦è¿”å›ä¸€ä¸ªå€¼å³å¯ç”Ÿæˆé›†åˆ æ·±å…¥pythonçš„setå’Œdict dictçš„abcçš„ç»§æ‰¿å…³ç³» from collection.abc import Mapping dictå±äºmappingç±»å‹ å³ç»§æ‰¿äº†mapping dictçš„å¸¸ç”¨æ–¹æ³• clear() åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´  copy() æµ…æ‹·è´ æŒ‡å‘åŒä¸€åœ°å€ æ‹·è´åçš„æ“ä½œä¼šå½±å“è¢«æ‹·è´çš„æ•°æ® æ·±æ‹·è´éœ€è¦import copy fromkeys() å°†å¯è¿­ä»£æ˜¯å¯¹è±¡è½¬æˆdictçš„keys get() é¿å…åœ¨æ²¡æœ‰å¯¹åº”å…ƒç´ æ—¶æŠ›å‡ºå¼‚å¸¸ items() æ‹†åŒ…keyå’Œvalue setdefault(key, default=None) å’Œget()ç±»ä¼¼, ä½†å¦‚æœé”®ä¸å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå°†ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºdefault update() åˆå¹¶æˆ–æ·»åŠ  å³æ›´æ–°åŸæ¥çš„dict #çŒœæƒ³ ä¼šæŠŠè¿­ä»£ä¸­çš„å¥‡æ•°ä½å…ƒç´ ä½œä¸ºkey å¶æ•°ä½åšä¸ºvalue dictçš„å­ç±» ä¸å»ºè®®ç»§æ‰¿listå’Œdictç­‰å†…ç½®çš„ç±»å‹ ç”±äºåº•å±‚ä½¿ç”¨cè¯­è¨€å®ç° æ‰€ä»¥ä¸€äº›æ“ä½œä¸ä¼šè°ƒç”¨è¦†ç›–åçš„æ–¹æ³• å¦‚æœè¦ç»§æ‰¿å»ºè®®ä½¿ç”¨ from collections import UserDict æ¨¡å— å®Œå…¨æœ‰pythonè¯­è¨€ç¼–å†™ from collections import defaultdict å…¶ä¸­çš„__missing__å‡½æ•° ä½œç”¨ï¼šåœ¨æ‰¾ä¸åˆ°å…ƒç´ æ—¶ è®¾ç½®é»˜è®¤å€¼ setå’Œfronzenset setï¼ˆé›†åˆå¯å˜ï¼‰ fronzensetï¼ˆä¸å¯å˜çš„é›†åˆï¼‰æ— åºçš„ ä¸é‡å¤ setå¯ä»¥é€šè¿‡addæ–¹æ³•æ·»åŠ å…ƒç´  fronzensetä¸èƒ½ set çš„æ–¹æ³• add update å¯å°†ä¸¤ä¸ªsetåˆå¹¶ä¸ºä¸€ä¸ªset difference è¿”å›ä¸¤ä¸ªé›†åˆçš„å·®é›† #é›†åˆè¿ç®— | å¹¶é›† &amp; äº¤é›† - å·®é›† è¿ç®—ç¬¦å®é™…æ˜¯è°ƒç”¨é­”æ³•å‡½æ•° issubset åˆ¤æ–­æ˜¯å¦å­˜åœ¨äº¤é›† dictå’Œsetçš„å®ç°åŸç† ä¸€äº›ç»“è®º dictæŸ¥æ‰¾çš„æ€§èƒ½è¿œè¿œå¤§äºlist åœ¨listä¸­éšç€listæ•°æ®çš„å¢å¤§ æŸ¥æ‰¾æ—¶é—´ä¼šå¢å¤§ åœ¨dictä¸­æŸ¥æ‰¾å…ƒç´ çš„æ—¶é—´ ä¸ä¼šéšç€dictçš„å¢å¤§è€Œå¢å¤§ dictçš„keyæˆ–è€…setçš„å€¼ éƒ½ dictåŸç†ï¼ˆä¸javaä¸­çš„Mapç›¸ä¼¼ï¼‰ å¯¹keyåšå“ˆå¸Œè¿ç®— ç„¶ååšä¸è¿ç®—ä½œä¸ºåç§»é‡ å¦‚æœå‘ç”Ÿå†²çªåˆ™è§£å†³å†²çª æ‰€ä»¥æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(1) 1.dictçš„keyæˆ–è€…setçš„å€¼ éƒ½æ˜¯å¿…é¡»æ˜¯å¯ä»¥hashçš„ ä¸å¯å˜å¯¹è±¡ éƒ½æ˜¯å¯ä»¥hashçš„ å¦‚str fronzenset tuple å¯è‡ªå·±å®ç°ç±»çš„__hash__ 2.dictçš„å†…å­˜å¼€é”€å¤§ ä½†æ˜¯æŸ¥è¯¢çš„é€Ÿåº¦å¿« è‡ªå®šä¹‰çš„å¯¹è±¡æˆ–è€…pythonå†…éƒ¨çš„å¯¹è±¡éƒ½æ˜¯ç”¨dictåŒ…è£…çš„ 3.dictçš„å­˜å‚¨é¡ºåºå’Œå…ƒç´ æ·»åŠ é¡ºåºæœ‰å…³ å’Œå†…éƒ¨çš„hashè¡¨åç§»æœ‰å…³ #è¿™å°±æ˜¯ä¸ºä»€ä¹ˆsetåœ¨æ›´æ–°æ•°æ®åprintå‡ºæ¥çš„æ•°æ®ä½ç½®æ— åºä¸”å¯èƒ½ä¼šæ”¹å˜åŸæ¥æ•°æ®çš„ä½ç½®çš„åŸå›  4.æ·»åŠ æ•°æ®æœ‰å¯èƒ½æ”¹å˜å·²æœ‰æ•°æ®çš„é¡ºåº å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§å’Œåƒåœ¾å›æ”¶ pythonä¸­çš„å˜é‡æ˜¯ä»€ä¹ˆ pythonå’Œjavaä¸­çš„å˜é‡æœ¬è´¨ä¸ä¸€æ · pythonçš„å˜é‡å®è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆ int str å˜é‡å¯ä»¥çœ‹åšä¸€ä¸ªä¾¿åˆ©è´´ å¯ä»¥é€šè¿‡isè¿ç®—ç¬¦æˆ–è€…id()å‡½æ•°åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€å˜é‡ ==å’Œisçš„åŒºåˆ« ==åˆ¤æ–­çš„æ˜¯å†…å®¹æ˜¯å¦ç›¸ç­‰ è°ƒç”¨çš„æ˜¯__eq__é­”æ³•å‡½æ•° #ç±»ä¼¼javaä¸­çš„Object.equals isåˆ¤æ–­çš„æ˜¯æŒ‡é’ˆæ‰€æŒ‡çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸åŒ ä¹Ÿå°±æ˜¯å˜é‡id()æ˜¯å¦ç›¸åŒ å› ä¸ºpythonä¸­çš„internæœºåˆ¶ æœ‰æ—¶å€™int strç±»å‹å†…å®¹ç›¸åŒ idä¹Ÿç›¸åŒ #ç›¸å½“äºjavaä¸­String.internæ–¹æ³• delè¯­å¥å’Œåƒåœ¾å›æ”¶ pythonä¸­åƒåœ¾å›æ”¶çš„ç®—æ³•æ˜¯é‡‡ç”¨ å¼•ç”¨è®¡æ•° å¼•ç”¨è®¡æ•° å½“ä¸€ä¸ªå˜é‡æŒ‡å‘ä¸€ä¸ªåœ°å€æ˜¯ é‚£ä¹ˆå¼•ç”¨è®¡æ•°å™¨+1 delä¸€ä¸ªå˜é‡æ—¶ è¯¥åœ°å€çš„å¼•ç”¨è®¡æ•°å™¨-1 å½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ èµ„æºè¢«å›æ”¶ delè¯­å¥å®é™…è°ƒç”¨__del__é­”æ³•å‡½æ•° ä¸€ä¸ªç»å…¸çš„å‚æ•°é”™è¯¯ ä¼ é€’çš„å‚æ•°å°½é‡ä¸ºä¸å¯å˜çš„ # å¼•ç”¨ä¼ é€’ å‚æ•°ä¼ é€’ å…ƒç±»ç¼–ç¨‹ propertyåŠ¨æ€å±æ€§ @propertyè£…é¥°å™¨ ä¿®é¥°æ–¹æ³•å å¯ä»¥é€šè¿‡ . çš„æ–¹å¼è®¿é—® å˜å¾—ä¸è®¿é—®å±æ€§çš„æ–¹å¼ç›¸åŒ è¢«ä¿®é¥°æ–¹æ³•çœ‹ä½œä¸€ä¸ªå±æ€§ è¯¥å±æ€§çš„å€¼å¯ä»¥è‡ªå®šä¹‰é€»è¾‘è¿”å› @xxx.setter è£…é¥°å™¨ xxxä¸ºè¢«@propertyè£…é¥°å™¨ä¿®é¥°çš„æ–¹æ³• åŒç† ç”¨æ¥åŠ¨æ€è®¾ç½®åŠ¨æ€å±æ€§ __getattr__ __getattribute__é­”æ³•å‡½æ•° __getattr__åœ¨æŸ¥æ‰¾ä¸åˆ°å±æ€§çš„æ—¶å€™è°ƒç”¨ __getattribute__æ‰€æœ‰å±æ€§è®¿é—®çš„å…¥å£ è¯¥é­”æ³•å‡½æ•°ä¼šè°ƒç”¨__getattr__ å±æ€§æè¿°ç¬¦å’Œå±æ€§æŸ¥æ‰¾è¿‡ç¨‹ å±æ€§æè¿°ç¬¦ å®ç°__get__ __set__ __delete__ ä»»ä½•ä¸€ä¸ªé­”æ³•æ–¹æ³• å°±å¯ä»¥å°†ä¸€ä¸ªç±»å˜æˆå±æ€§æè¿°ç¬¦ å®ç°äº†__get__ å’Œ __set__ ç§°ä¸ºæ•°æ®å±æ€§æè¿°ç¬¦ åªå®ç°äº†__get__ ç§°ä¸ºéæ•°æ®å±æ€§æè¿°ç¬¦ ä½¿ç”¨ï¼šåœ¨ä¸€ä¸ªç±»ä¸­å°†å±æ€§æè¿°ç¬¦å®ä¾‹èµ‹å€¼ç»™ç±»å˜é‡ å±æ€§æŸ¥æ‰¾è¿‡ç¨‹ getattr()æ–¹æ³•ç”¨äºè®¿é—®å®ä¾‹çš„å˜é‡ #å¦‚é¡¹ç›®é‡Œmogodb_clientè®¿é—®collectionçš„ä¸‰ç§æ–¹æ³• 1.mongodb_client.r20.dmmr18 2.mongodb_client[r20][dmmr18] 3.getattr(self.mongodb_client[&quot;r20&quot;],&quot;dmmr18&quot;) æ­¤å¤„æœ‰å›¾ new å’Œ init çš„åŒºåˆ« new æ˜¯ç”¨æ¥æ§åˆ¶å¯¹è±¡çš„ç”Ÿæˆè¿‡ç¨‹ ï¼Œåœ¨å¯¹è±¡ç”Ÿæˆä¹‹å‰ init æ˜¯ç”¨æ¥å®Œå–„å¯¹è±¡çš„ å¦‚æœnewæ–¹æ³•ä¸è¿”å›å¯¹è±¡ åˆ™ä¸ä¼šè°ƒç”¨initå‡½æ•° __new__(cls, *args, **kwargs) å¦‚æœæŒ‡å®šå‚æ•°åèµ‹å€¼ åˆ™èµ‹å€¼ç»™**kwargs ç±»å‹ä¸º dict å¦‚æœæ²¡æœ‰æŒ‡å®šå‚æ•°åèµ‹å€¼ åˆ™èµ‹å€¼ç»™ *args ç±»å‹ä¸º tuple cls ä¸ºå¯¹è±¡ éœ€return super.()__new__(cls) æ‰ä¼šè°ƒå› init å‡½æ•° __init__(self) åœ¨new ä¹‹åè¢«è°ƒç”¨ è‡ªå®šä¹‰å…ƒç±» å…ƒç±»æ˜¯åˆ›å»ºç±»çš„ç±» type(object_or_name, bases, dict) ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç±»å ä¼ å…¥strç±»å‹ ç¬¬äºŒä¸ªå‚æ•°ä¸º ç»§æ‰¿åŸºç±» å½“ä¸ç»§æ‰¿æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªç©ºtuple () ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º è‡ªå®šä¹‰å±æ€§å’Œæ–¹æ³• dictç±»å‹ keyä¸ºå±æ€§åæˆ–å‡½æ•°å valueä¸ºå±æ€§å€¼æˆ–è‡ªå®šä¹‰çš„å‡½æ•° metaclass ç±»å±æ€§ ä½œç”¨ï¼šå¦‚ ç»§æ‰¿æŠ½è±¡åŸºç±»æ—¶åšå‡½æ•°é‡å†™çš„æ£€æŸ¥ æŒ‡å®šä¸€ä¸ªç±» é€šè¿‡é‡å†™__new__å‡½æ•°æ¥è‡ªå®šä¹‰åˆ›å»ºç±»å¯¹è±¡å’Œå®ä¾‹çš„è¿‡ç¨‹ å…ƒç±»éœ€è¦ç»§æ‰¿typeç±» éœ€ return super.()__new__(cos, *args, **kwargs) *args å’Œ **kwargs ä¹Ÿéœ€è¦å®Œæ•´çš„ä¼ é€’è¿›æ¥ é€šè¿‡å…ƒç±»å®ç°ORM è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ pythonä¸­çš„è¿­ä»£åè®® è¿­ä»£å™¨æ˜¯ä»€ä¹ˆï¼Ÿ è¿­ä»£å™¨æ˜¯è®¿é—®é›†åˆå†…å…ƒç´ çš„ä¸€ç§æ–¹å¼ ä¸€èˆ¬ç”¨æ¥éå†æ•°æ® è¿­ä»£å™¨å’Œä»¥ä¸‹æ ‡çš„è®¿é—®æ–¹å¼ä¸ä¸€æ · è¿­ä»£å™¨æ˜¯ä¸èƒ½è¿”å›çš„ è¿­ä»£å™¨æä¾›äº†ä¸€ç§æƒ°æ€§æ–¹å¼æ•°æ®çš„æ–¹å¼ listä¸æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ ä½†æ˜¯å¯è¿­ä»£ forè¯­å¥ è‡ªåŠ¨ä½¿ç”¨ iter() å†…ç½®æ–¹æ³•å°†listå˜æˆä¸€ä¸ªè¿­ä»£å™¨ forè¯­å¥æ‰å¯è¿­ä»£ from collection.abc import Iterable å¯è¿­ä»£ å®ç°__iter__æŠ½è±¡å‡½æ•° Iterator è¿­ä»£å™¨ å®ç°__next__æŠ½è±¡å‡½æ•° ä»€ä¹ˆæ˜¯è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡ è¿­ä»£å™¨ä¸è¿­ä»£å¯¹è±¡é€»è¾‘å®ç°è¦åˆ†ç¦» è¿­ä»£å™¨ ç»§æ‰¿ from collection.abc import Iterator #javaä¸­æ˜¯ç»§æ‰¿ implements Iterator æ¥å£ å®ç° __next__é­”æ³•å‡½æ•° ç»´æŠ¤ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½® #javaä¸­é‡å†™ next() æ–¹æ³• å¦‚æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ åˆ™ raise StopIterator å¼‚å¸¸ ç»“æŸè¿­ä»£ #javaä¸­é‡å†™ hasNext() æ–¹æ³• åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´  å¯è¿­ä»£å¯¹è±¡ å®ç°__iter__ é­”æ³•å‡½æ•° return ä¸€ä¸ªè¿­ä»£å™¨ ç”Ÿæˆå™¨å‡½æ•°çš„ä½¿ç”¨ ç”Ÿæˆå™¨å‡½æ•° æƒ°æ€§æ±‚å€¼ å»¶è¿Ÿæ±‚å€¼æä¾›äº†å¯èƒ½ å‡½æ•°ä¸­åªè¦æœ‰yieldå…³é”®å­— è¯¥å‡½æ•°å°±æ˜¯ç”Ÿæˆå™¨å‡½æ•° yield è¿”å›çš„æ˜¯generatorï¼ˆç”Ÿæˆå™¨ï¼‰å¯¹è±¡ æ˜¯å¯è¿­ä»£çš„ return åªèƒ½å†™ä¸€ä¸ª è€Œyieldèƒ½å†™å¤šä¸ª ç”Ÿæˆå™¨åœ¨UserListä¸­çš„åº”ç”¨ from collection.abc import UserList UserList ä½¿ç”¨pythonå®ç° å…¶ä¸­__iter__ é­”æ³•å‡½æ•°ç”¨åˆ°yieldå…³é”®å­— å°†è¯¥é­”æ³•å‡½æ•°å˜ä¸ºç”Ÿæˆå™¨ ä¾æ¬¡è¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å…ƒç´  python socketç¼–ç¨‹ å¼„æ‡‚ HTTPã€Socketã€TCP è¿™å‡ ä¸ªæ¦‚å¿µ socketæœ¬è´¨æ˜¯ç¼–ç¨‹æ¥å£ ä¸å±äºä»»ä½•åè®® å¯¹TCP/IPåè®®çš„å°è£… æä¾›ç»™ç¨‹åºçŒ¿ä½¿ç”¨ ä¸ä¸‹å±‚åè®®äº¤äº’ åœ¨ä¸Šå±‚å¯è‡ªå®šä¹‰åè®® http åº”ç”¨å±‚åè®® TCP ä¼ è¾“å±‚åè®® clientå’Œserverå®ç°é€šè®¯ æ­¤å¤„æœ‰å›¾ å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹å’Œçº¿ç¨‹æ± ç¼–ç¨‹ python ä¸­çš„ GIL gil global interpreter lock ï¼ˆcpythonï¼‰ pythonä¸­ä¸€ä¸ªçº¿ç¨‹å¯¹åº”äºcè¯­è¨€ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ gilä½¿å¾—åŒä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä¸€ä¸ªcpuä¸Šæ‰§è¡Œå­—èŠ‚ç , æ— æ³•å°†å¤šä¸ªçº¿ç¨‹æ˜ å°„åˆ°å¤šä¸ªcpuä¸Šæ‰§è¡Œ gilä¼šæ ¹æ®æ‰§è¡Œçš„å­—èŠ‚ç è¡Œæ•°ä»¥åŠæ—¶é—´ç‰‡é‡Šæ”¾gilï¼Œgilåœ¨é‡åˆ°ioçš„æ“ä½œæ—¶å€™ä¸»åŠ¨é‡Šæ”¾ å¤šçº¿ç¨‹ç¼–ç¨‹ - threading å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç¬¬ä¸€ç§æ–¹å¼ import threading threading.Thread(target=func, args=tuple) target å‚æ•°ä¼ å…¥ä¸€ä¸ªæ–¹æ³• args å‚æ•°ç”¨äºä¼ å…¥æ–¹æ³•å‚æ•° ç±»å‹ä¸ºtuple è·å¾—çº¿ç¨‹å®ä¾‹å æ‰§è¡Œ start()æ–¹æ³• å®ä¾‹çš„setDaemon(bool) æ–¹æ³• boolä¸ºTrueæ—¶ å¯å°†çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ å³ä¸»çº¿ç¨‹ç»“æŸæ—¶åŒæ—¶ç»“æŸè¯¥å®ˆæŠ¤çº¿ç¨‹ å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç¬¬äºŒç§æ–¹å¼ ç»§æ‰¿ threading.Thread å¹¶å®ç°runå‡½æ•° å®ä¾‹åŒ–ç±»åæ‰§è¡Œstart() æ–¹æ³•å³å¯ join() æ–¹æ³•å¯ä»¥é˜»å¡ä¸»çº¿ç¨‹ ç­‰åˆ°å­çº¿ç¨‹ç»“æŸå æ‰ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹ çº¿ç¨‹é—´é€šä¿¡ - å…±äº«å˜é‡å’Œ Queue å…±äº«å˜é‡ æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ Queue Queueä½¿ç”¨çš„æ˜¯dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ˜¯çº¿ç¨‹å®‰å…¨çš„ ä¸€äº›æ–¹æ³• task_done join qsize empty full put get put_nowait get_nowait çº¿ç¨‹åŒæ­¥ - Lockã€RLock from threading import Lock,Rlock Lock å£°æ˜é” Lock() lock.acquire è·å–é” lock.release é‡Šæ”¾é” RLock å¯é‡å…¥é” #ç›¸å½“äºjavaä¸­çš„ReentrantLock åœ¨åŒä¸€çº¿ç¨‹ä¸­ acquireå’Œrelease æ“ä½œçš„æ¬¡æ•°è¦ç›¸ç­‰ çº¿ç¨‹åŒæ­¥ - condition ä½¿ç”¨ä»¥åŠæºç åˆ†æ from threading import Condition æ¡ä»¶å˜é‡ ç”¨äºå¤æ‚çš„çº¿ç¨‹é—´åŒæ­¥ é…åˆwithè¯­å¥ä½¿ç”¨ è¿›å…¥__enter__ æ–¹æ³• ä¼šå¯¹conditionåŠ é” wait æ–¹æ³•æ‰§è¡Œæ—¶ ä¼šè·å–ä¸€ä¸ªé”å®ä¾‹å¹¶åŠ é” å¹¶æŠŠwaitçš„é”åŠ å…¥åŒç«¯é˜Ÿåˆ— åŒæ—¶é‡Šæ”¾conditionçš„é” notifyæ–¹æ³•æ‰§è¡Œæ—¶ ä¼šå¯¹åŒç«¯é˜Ÿåˆ—ä¸­çš„waité”å¼¹å‡º å¹¶è§£é” ä¸€äº›æ€»ç»“ å¯åŠ¨é¡ºåºå¾ˆé‡è¦ åœ¨è°ƒç”¨with condä¹‹åæ‰èƒ½è°ƒç”¨waitæˆ–è€…notifyæ–¹æ³• conditionæœ‰ä¸¤å±‚é”ï¼Œ ä¸€æŠŠåº•å±‚é”ä¼šåœ¨çº¿ç¨‹è°ƒç”¨äº†waitæ–¹æ³•çš„æ—¶å€™é‡Šæ”¾ï¼Œ ä¸Šé¢çš„é”ä¼šåœ¨æ¯æ¬¡è°ƒç”¨waitçš„æ—¶å€™åˆ†é…ä¸€æŠŠå¹¶æ”¾å…¥åˆ°condçš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œç­‰åˆ°notifyæ–¹æ³•çš„å”¤é†’ çº¿ç¨‹åŒæ­¥ - Semaphore ä½¿ç”¨ä»¥åŠæºç åˆ†æ Semaphore æ˜¯ç”¨äºæ§åˆ¶è¿›å…¥æ•°é‡çš„é” #ç›¸å½“äºjavaä¸­çš„Semaphore from threading import Semaphore å†…éƒ¨ä½¿ç”¨conditionå®Œæˆ threading.Semaphore(num) numä¸ºå¹¶å‘æ•° acquireæ–¹æ³•è°ƒç”¨æ—¶ å…¶ä¸­çš„è®¡æ•°å™¨ä¼š+1 å½“è®¡æ•°å™¨æ»¡æ—¶ ä¹Ÿå°±æ˜¯è¾¾åˆ°äº†numçš„æ•°é‡æ—¶ä¼šé˜»å¡ release æ–¹æ³•è°ƒç”¨æ—¶ å…¶ä¸­çš„è®¡æ•°å™¨ä¼š-1 å½“è®¡æ•°å™¨ä¸ºé›¶æ—¶ ä¼šé‡Šæ”¾é” ThreadPoolExecutorçº¿ç¨‹æ±  ä¸€äº›æ€»ç»“ çº¿ç¨‹æ± ï¼Œ ä¸ºä»€ä¹ˆè¦çº¿ç¨‹æ±  ä¸»çº¿ç¨‹ä¸­å¯ä»¥è·å–æŸä¸€ä¸ªçº¿ç¨‹çš„çŠ¶æ€æˆ–è€…æŸä¸€ä¸ªä»»åŠ¡çš„çŠ¶æ€ï¼Œä»¥åŠè¿”å›å€¼ å½“ä¸€ä¸ªçº¿ç¨‹å®Œæˆçš„æ—¶å€™æˆ‘ä»¬ä¸»çº¿ç¨‹èƒ½ç«‹å³çŸ¥é“ futureså¯ä»¥è®©å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ç¼–ç æ¥å£ä¸€è‡´ from concurrent.futures import ThreadPoolExecutor ThreadPoolExecutor(max_workers) max_workersä¸ºçº¿ç¨‹æ± å¤§å° é€šè¿‡ submit(func, tuple) å‡½æ•°æäº¤ä¸€ä¸ªæ–¹æ³•åˆ°çº¿ç¨‹æ± ä¸­ funcä¸ºå‡½æ•° tupleä¸ºä»¥å…ƒç¥–çš„æ–¹å¼ç»™funcå‡½æ•°ä¼ å…¥å‚æ•° submitä¼šç«‹å³è¿”å›ä¸€ä¸ªfuturesç±» ç”¨æ¥ç›‘è§†çº¿ç¨‹çŠ¶æ€ ç›‘è§†çº¿ç¨‹çŠ¶æ€å¸¸ç”¨æ–¹æ³•ï¼šdone result cancel from concurrent.futures import as_completed ç”¨æ¥è·å–çº¿ç¨‹æ± ä¸­å·²ç»å®Œæˆçš„çº¿ç¨‹ ä½¿ç”¨ï¼šä¼ å…¥æ‰¹é‡çš„çº¿ç¨‹æ± è¿”å›ç»“æœ ç„¶åé€šè¿‡forè¯­å¥è¿­ä»£ å¦‚ï¼šfor future in as_completed(all_task) æœ€åfuture.resultå¾—åˆ°ç»“æœ executor.map #executorä¸ºä¸€ä¸ªçº¿ç¨‹æ± å®ä¾‹ executor.map(func, *args) åŒç† for result in executor.map(func, *args) è¿­ä»£ç›´æ¥è¿”å›ç»“æœ as_completedå’Œexecutor.mapçš„åŒºåˆ« as_completed å°†è¿”å›å…ˆå®Œæˆçš„è¿›ç¨‹çš„ç»“æœ executor.map å°†è¿”å›å…ˆæ‰§è¡Œçš„è¿›ç¨‹çš„ç»“æœ from concurrent.futures import wait å¯ä»¥é˜»å¡ä¸»çº¿ç¨‹å¹¶å¯ä»¥æŒ‡å®šä½•æ—¶ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹ å¦‚ï¼šæ‰€æœ‰çº¿ç¨‹å®Œæˆä¹‹åæ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œ æˆ–è€…åªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹å®Œæˆåå°±ç»§ç»­å¾€ä¸‹æ‰§è¡Œ ä½¿ç”¨ï¼šwait(fs) fsä¸ºfuturesåºåˆ— è¿˜æœ‰timeoutï¼ˆç­‰å¾…è¶…æ—¶æ—¶é—´ï¼‰å‚æ•° é»˜è®¤ä¸ºNone å’Œreturn_whenï¼ˆä½•æ—¶ç»§ç»­æ‰§è¡Œï¼‰ å‚æ•° é»˜è®¤ä¸ºALL_COMPLETED ThreadPoolExecutoræºç åˆ†æ from concurrent.futures import Future æœªæ¥å¯¹è±¡ taskçš„è¿”å›å®¹å™¨ åœ¨çº¿ç¨‹æ± æ‰§è¡Œsubmitå‡½æ•°æœ‰ç”Ÿæˆä¸€ä¸ªFutureå®ä¾‹ ç„¶åå°†futureå®ä¾‹å’Œéœ€è¦æ‰§è¡Œçš„æ–¹æ³•æ”¾å…¥ä¸€ä¸ª_WorkItemå®ä¾‹ä¸­ _WorkItemåˆè¢«æ”¾åˆ°_work_queueé˜Ÿåˆ—ä¸­ å¾…æ‰§è¡Œ æœ€å_adjust_thread_countæ–¹æ³•æ§åˆ¶çº¿ç¨‹æ± å¤§å°å¹¶å¼€å¯çº¿ç¨‹ äº¤ç»™_workeræ–¹æ³• _workerå‡½æ•°è´Ÿè´£ä»_work_queueé˜Ÿåˆ—ä¸­è·å–_WorkItemå¹¶æ‰§è¡Œrunæ–¹æ³• _WorkItem.run()å‡½æ•°è´Ÿè´£å®Œæˆå‡½æ•°çš„æ‰§è¡Œå’Œå°†æœ€åå®Œæˆçš„ç»“æœèµ‹å€¼ç»™futureå®ä¾‹ å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹å¯¹æ¯” å¤šè¿›ç¨‹ä½¿ç”¨ from concurrent.futures import ProcessPoolExecutor åŒ… ç”±äºapiç›¸åŒ æ‰€ä»¥ä¸å¤šçº¿åˆ‡æ¢å¾ˆå®¹æ˜“ ThreadPoolExecutoræ¢æˆProcessPoolExecutorå³å¯ ä¸€äº›æ€»ç»“ è€—cpuçš„æ“ä½œï¼Œç”¨å¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œ å¯¹äºioæ“ä½œæ¥è¯´ï¼Œ ä½¿ç”¨å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œè¿›ç¨‹åˆ‡æ¢ä»£ä»·è¦é«˜äºçº¿ç¨‹ 1. å¯¹äºè€—è´¹cpuçš„æ“ä½œï¼Œå¤šè¿›ç¨‹ä¼˜äºå¤šçº¿ç¨‹ 2. å¯¹äºioæ“ä½œæ¥è¯´ï¼Œå¤šçº¿ç¨‹ä¼˜äºå¤šè¿›ç¨‹ ç”±äºGILé”çš„å­˜åœ¨ å¤šè¿›ç¨‹å¹¶è¡Œçš„æ•ˆç‡è¦æ¯”å¤šè¿›ç¨‹å¹¶å‘çš„æ•ˆç‡é«˜ è€—è´¹cpuçš„è¿ç®—æ“ä½œåº”è¯¥æ”¾åˆ°å¤šä¸ªcpuä¸Š ioæ“ä½œä¸æ€ä¹ˆè€—è´¹cpu ä½†åœ¨åˆ‡æ¢çš„æ“ä½œä¸Š çº¿ç¨‹æ•ˆç‡è¦ç•¥å¿«ä¸è¿›ç¨‹æ•ˆç‡ æ‰€ä»¥ioæ“ä½œåº”è¯¥ç”¨å¤šè¿›ç¨‹ è€Œä¸”cpuæ ¸æ•°æ˜¯æœ‰é™çš„ ä½†è¿›ç¨‹å¯ä»¥å¼€å¾ˆå¤š multiprocessing å¤šè¿›ç¨‹ç¼–ç¨‹ os.fork ä¼šæ–°å»ºå­è¿›ç¨‹ åªèƒ½ç”¨äºUnix/Linuxä¸­ ä¸èƒ½ç”¨åœ¨winä¸­ å­è¿›ç¨‹ä¼šç»§ç»­æ‰§è¡Œforkå‡½æ•°åçš„ä»£ç  ä½†è¿›ç¨‹é—´æ•°æ®æ˜¯å®Œå…¨éš”ç¦»çš„ from concurrent.futures import ProcessPoolExecutor åº•å±‚ä½¿ç”¨çš„æ˜¯multiprocessing å®ç°å¤šè¿›ç¨‹æ–¹æ³• éœ€ç»§æ‰¿ multiprocessing.Process å®ç°çš„æ–¹æ³•ä¸å¤šçº¿ç¨‹ç±»ä¼¼ multiprocessing.Process(target, args) ä¸€äº›æ–¹æ³• pid start join is_alive multiprocessing.pool() ä¹Ÿå¯ä»¥å®ç°è¿›ç¨‹æ±  å¦‚æœä¸æŒ‡å®šçº¿ç¨‹æ± å¤§å° åˆ™å†…éƒ¨è‡ªåŠ¨è·å–os.cpu_count()ï¼ˆcpuæ ¸å¿ƒæ•°ï¼‰ä½œä¸ºè¿›ç¨‹æ± å¤§å° pool.apply_async() å¼‚æ­¥æäº¤ä»»åŠ¡ è¿”å›ApplyResult ç±»ä¼¼Future pool.close() å…³é—­è¿›ç¨‹æ±  ä¸å†æ¥å—æ–°ä»»åŠ¡ pool.join() ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ éœ€åœ¨pool.close() è°ƒç”¨ä¹‹åè°ƒç”¨ ä¸ç„¶ä¼šæŠ¥é”™ Pool is still running pool.imap() åŒå¯¹çº¿ç¨‹æ± çš„ executor.map åŒæ ·å…ˆè¿”å›å…ˆåŠ å…¥çš„æ–¹æ³•çš„ç»“æœ è¿›ç¨‹é—´é€šä¿¡ - Queueã€Pipeï¼ŒManager ä½¿ç”¨çš„æ˜¯from multiprocessing import Queue, Manager, Pipe å¤šè¿›ç¨‹æ•°æ®æ˜¯å®Œå…¨éš”ç¦»çš„ å…±äº«å…¨å±€å˜é‡ä¸èƒ½é€‚ç”¨äºå¤šè¿›ç¨‹ç¼–ç¨‹ï¼Œå¯ä»¥é€‚ç”¨äºå¤šçº¿ç¨‹ multiprocessingä¸­çš„queueä¸èƒ½ç”¨äºpoolè¿›ç¨‹æ±  poolä¸­çš„è¿›ç¨‹é—´é€šä¿¡éœ€è¦ä½¿ç”¨Managerä¸­çš„queue éœ€è¦å®ä¾‹åŒ– Manager().Queue(num) Pipeå®ä¾‹åŒ–è¿”å›receive_pipeï¼ˆæ¥æ”¶ç®¡é“ï¼‰ send_pipe ï¼ˆå‘é€ç®¡é“ï¼‰ åªèƒ½é€‚ç”¨äºä¸¤ä¸ªè¿›ç¨‹é€šè®¯ æ€§èƒ½è¦é«˜äºQueue Managerä¸­æœ‰å¾ˆå¤šå‡½æ•°å¯ä»¥å®ç°å¤šè¿›ç¨‹å…±äº«ä¸€ä¸ªå†…å­˜å— å®ç°ç±»ä¼¼äºå¤šçº¿ç¨‹å…±äº«å…¨å±€å˜é‡ è¿˜æœ‰å¾ˆå¤šå‡½æ•°å®ç°é€šè®¯åŒæ­¥ APIç±»ä¼¼äºå¤šçº¿ç¨‹åŒæ­¥API åç¨‹å’Œå¼‚æ­¥io å¹¶å‘ã€å¹¶è¡Œã€åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ å¹¶å‘ï¼šæ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µå†… æœ‰å‡ ä¸ªç¨‹åºåœ¨åŒä¸€ä¸ªcpuä¸Šè¿è¡Œ ä½†æ˜¯ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨cpuä¸Šè¿è¡Œ å¹¶è¡Œï¼šæ˜¯æŒ‡ä»»æ„æ—¶åˆ»ç‚¹ä¸Š æœ‰å¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œåœ¨å¤šä¸ªcpuä¸Š åŒæ­¥ï¼šæ˜¯æŒ‡ä»£ç è°ƒç”¨IOæ“ä½œæ—¶ å¿…é¡»ç­‰å¾…IOæ“ä½œå®Œæˆæ‰è¿”å›çš„è°ƒç”¨æ–¹å¼ å¼‚æ­¥ï¼šæ˜¯æŒ‡ä»£ç è°ƒç”¨IOæ“ä½œæ—¶ ä¸å¿…ç­‰å¾…IOæ“ä½œå®Œæˆå°±è¿”å›çš„è°ƒç”¨æ–¹å¼ é˜»å¡ï¼šæ˜¯æŒ‡è°ƒç”¨å‡½æ•°æ—¶å€™å½“å‰çº¿ç¨‹è¢«æŒ‚èµ· éé˜»å¡ï¼šæ˜¯æŒ‡è°ƒç”¨å‡½æ•°æ—¶å€™å½“å‰çº¿ç¨‹ä¸ä¼šè¢«æŒ‚èµ· è€Œæ˜¯ç«‹å³è¿”å› C10Ké—®é¢˜å’ŒIOå¤šè·¯å¤ç”¨ (selectã€poll å’Œ epoll) Unixä¸‹äº”ç§I/Oæ¨¡å‹ é˜»å¡å¼I/O éé˜»å¡å¼I/O I/Oå¤ç”¨ ä¿¡å·é©±åŠ¨å¼I/O å¼‚æ­¥I/Oï¼ˆPOSIXçš„aio_ç³»åˆ—å‡½æ•°ï¼‰ select poll epollæ˜¯ä¸€ä¸ªæ”¹è‰¯çš„è¿‡ç¨‹ epollå¹¶ä¸ä»£è¡¨ä¸€å®šæ¯”selectå¥½ åœ¨å¹¶å‘é«˜çš„æƒ…å†µä¸‹ï¼Œè¿æ¥æ´»è·ƒåº¦ä¸æ˜¯å¾ˆé«˜ï¼Œ epollæ¯”select å¹¶å‘æ€§ä¸é«˜ï¼ŒåŒæ—¶è¿æ¥å¾ˆæ´»è·ƒï¼Œ selectæ¯”epollå¥½ select+å›è°ƒ+äº‹ä»¶å¾ªç¯è·å–html ä½¿ç”¨éé˜»å¡IOå®Œæˆhttpè¯·æ±‚ client.setblocking(False) è®¾ç½®éé˜»å¡IOå®Œæˆhttpè¯·æ±‚ ç«‹é©¬è¿”å› ä½†éœ€è¦ä¸æ–­çš„whileå¾ªç¯ å°è¯•åœ¨è¿æ¥å»ºç«‹å æ‰§è¡Œæ“ä½œ ä½¿ç”¨selectå®Œæˆhttpè¯·æ±‚ #å‚è€ƒjava NIOä¸­çš„Selectorç¼–ç¨‹ æ³¨å†Œ selector.register(self.client.fileno(), EVENT_WRITE, self.connected) self.client.fileno()ä¸ºæ–‡ä»¶æè¿°ç¬¦ EVENT_WRITE ä¸ºäº‹ä»¶ è¾¨è¯†å¯å†™äº‹ä»¶ self.connected ä¸ºå›è°ƒå‡½æ•° å½“clientè¿æ¥å»ºç«‹æˆåŠŸæ—¶ å›è°ƒæ‰§è¡Œ selector.register(self.client.fileno(), EVENT_READ, self.readable) self.client.fileno()ä¸ºæ–‡ä»¶æè¿°ç¬¦ EVENT_READ ä¸ºäº‹ä»¶ è¾¨è¯†å¯è¯»äº‹ä»¶ self.readable ä¸ºå›è°ƒå‡½æ•° å½“clientæ¥æ”¶åˆ°æ•°æ®æ—¶ å›è°ƒæ‰§è¡Œ æ³¨é”€ selector.unregister(key.fd) keyä¸ºæ³¨å†Œäº‹ä»¶æ ‡è¯† keyä¸ºæ³¨å†Œæ—¶self.client.fileno()çš„è¿”å›å€¼ å›è°ƒ äº‹ä»¶å¾ªç¯ï¼Œä¸åœçš„è¯·æ±‚socketçš„çŠ¶æ€å¹¶è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•° selectæœ¬èº«æ˜¯ä¸æ”¯æŒregisteræ¨¡å¼ socketçŠ¶æ€å˜åŒ–ä»¥åçš„å›è°ƒæ˜¯ç”±ç¨‹åºå‘˜å®Œæˆçš„ selector.select() è¿”å›ready readyè¿”å› keyå’Œmask å…¶ä¸­ key.data è¿”å›æ³¨å†Œæ—¶çš„å›è°ƒå‡½æ•° å›è°ƒä¹‹ç—› å¯è¯»æ€§å·® å…±äº«çŠ¶æ€ç®¡ç†å›°éš¾ å¼‚å¸¸å¤„ç†å›°éš¾ åç¨‹æ˜¯ä»€ä¹ˆ C10Mé—®é¢˜ ä¸€äº›ç¼–ç¨‹é—®é¢˜ å›è°ƒæ¨¡å¼ç¼–ç å¤æ‚åº¦é«˜ åŒæ­¥ç¼–ç çš„å¹¶å‘æ€§ä¸é«˜ å¤šçº¿ç¨‹ç¼–ç¨‹éœ€è¦çº¿ç¨‹åŒæ­¥é” åç¨‹ ä¼ ç»Ÿå‡½æ•°è°ƒç”¨ è¿‡ç¨‹ A-&gt;B-&gt;C æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯ä»¥æš‚åœçš„å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™æ¢å¤è¯¥å‡½æ•°çš„ç»§ç»­æ‰§è¡Œ å‡ºç°äº†åç¨‹ -&gt; æœ‰å¤šä¸ªå…¥å£çš„å‡½æ•°ï¼Œ å¯ä»¥æš‚åœçš„å‡½æ•°ï¼Œ å¯ä»¥æš‚åœçš„å‡½æ•°(å¯ä»¥å‘æš‚åœçš„åœ°æ–¹ä¼ å…¥å€¼) åç¨‹éœ€æ±‚ï¼šæš‚åœ ä¼ å€¼ æŠ›å¼‚å¸¸ å…³é—­ é‡‡ç”¨åŒæ­¥çš„æ–¹å¼å»ç¼–å†™å¼‚æ­¥çš„ä»£ç  åœ¨é€‚å½“çš„æ—¶å€™æš‚åœå‡½æ•°å¹¶åœ¨é€‚å½“çš„æ—¶å€™å¯åŠ¨å‡½æ•° ä½¿ç”¨å•çº¿ç¨‹å»åˆ‡æ¢ä»»åŠ¡ çº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿåˆ‡æ¢çš„ å•çº¿ç¨‹åˆ‡æ¢æ„å‘³ç€æˆ‘ä»¬éœ€è¦ç¨‹åºå‘˜è‡ªå·±å»è°ƒåº¦ä»»åŠ¡ ä¸åœ¨éœ€è¦é” å¹¶å‘æ€§é«˜ å¦‚æœå•çº¿ç¨‹å†…åˆ‡æ¢å‡½æ•° æ€§èƒ½è¿œé«˜äºçº¿ç¨‹åˆ‡æ¢ å¹¶å‘æ€§æ›´é«˜ ç”Ÿæˆå™¨è¿›é˜¶-sendã€closeå’Œthrowæ–¹æ³• ç”Ÿæˆå™¨å¯ä»¥æš‚åœ ç”Ÿæˆå™¨ä¸ä»…å¯ä»¥äº§å‡ºå€¼ è¿˜å¯ä»¥æ¥å—å€¼ å¯åŠ¨ç”Ÿæˆå™¨æœ‰ä¸¤ç§ next() å’Œsend() next() ï¼ˆæš‚åœï¼‰ send() ï¼ˆæš‚åœ ä¼ å€¼ï¼‰ æ–¹æ³•å¯ä»¥ä¼ é€’å€¼è¿›å…¥ç”Ÿæˆå™¨å†…éƒ¨ åŒæ—¶è¿˜å¯ä»¥é‡å¯ç”Ÿæˆå™¨ æ‰§è¡Œä¸‹ä¸€ä¸ªyieldä½ç½® ç”¨sendå‘é€énoneå€¼ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å¯åŠ¨ä¸€æ¬¡ç”Ÿæˆå™¨ï¼Œ æ–¹å¼æœ‰ä¸¤ç§1. gen.send(None), 2. next(gen) close() ï¼ˆå…³é—­ï¼‰ ä¼šæŠ›å‡º GeneratorExit å¼‚å¸¸ æ˜¯ç»§æ‰¿è‡ªBaseException å¦‚æœæ•è·å åšpass å¤„ç†ä¸”åè¾¹è¿˜æœ‰yieldè¯­å¥ closeçš„åœ°æ–¹å°±ä¼šæŠ›å‡º RuntimeError å¦‚æœæ•è·å raise StopIteration åˆ™ä¸ä¼šå†æŠ›å‡ºå¼‚å¸¸ æ‰€ä»¥è¿™ä¸ªå¼‚å¸¸ä¸éœ€è¦å»æ•è· throw() ï¼ˆæŠ›å¼‚å¸¸ï¼‰ ç»™å½“å‰yieldè¯­å¥æŠ›å‡ºå¼‚å¸¸ ç”Ÿæˆå™¨è¿›é˜¶-yield from from itertools import chain å¯ä»¥è¿æ¥å¯è¿­ä»£ç±»å‹ ç„¶ååœ¨ä¸€ä¸ªforä¸­è¿­ä»£ yieldå’Œyield fromçš„åŒºåˆ« yieldåªè¿”å›åŸå§‹çš„ç»“æœ yield from ä¼šä¾æ¬¡è¿”å›å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´  yield from main()â€”â€”&gt;gen():yield from gen_child() yield fromä¼šåœ¨è°ƒç”¨æ–¹(main())ä¸å­ç”Ÿæˆå™¨(gen_child())ä¹‹é—´å»ºç«‹ä¸€ä¸ªåŒå‘é€šé“ ä¼šå¤„ç†StopIterationç­‰å¼‚å¸¸ä»¥åŠå°†ç»“æœè¿”å› ä¸€äº›æ€»ç»“ ç®€åŒ–ç‰ˆ 1. å­ç”Ÿæˆå™¨å¯èƒ½åªæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªä½œä¸ºåç¨‹çš„ç”Ÿæˆå™¨ï¼Œæ‰€ä»¥å®ƒä¸æ”¯æŒ.throw()å’Œ.close()æ–¹æ³•ï¼› 2. å¦‚æœå­ç”Ÿæˆå™¨æ”¯æŒ.throw()å’Œ.close()æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å­ç”Ÿæˆå™¨å†…éƒ¨ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼› 3. è°ƒç”¨æ–¹è®©å­ç”Ÿæˆå™¨è‡ªå·±æŠ›å‡ºå¼‚å¸¸ 4. å½“è°ƒç”¨æ–¹ä½¿ç”¨next()æˆ–è€….send(None)æ—¶ï¼Œéƒ½è¦åœ¨å­ç”Ÿæˆå™¨ä¸Šè°ƒç”¨next()å‡½æ•°ï¼Œå½“è°ƒç”¨æ–¹ä½¿ç”¨.send()å‘é€é None å€¼æ—¶ï¼Œæ‰è°ƒç”¨å­ç”Ÿæˆå™¨çš„.send()æ–¹æ³•ï¼› å®Œæ•´ç‰ˆ 1. å­ç”Ÿæˆå™¨ç”Ÿäº§çš„å€¼ï¼Œéƒ½æ˜¯ç›´æ¥ä¼ ç»™è°ƒç”¨æ–¹çš„ï¼›è°ƒç”¨æ–¹é€šè¿‡.send()å‘é€çš„å€¼éƒ½æ˜¯ç›´æ¥ä¼ é€’ç»™å­ç”Ÿæˆå™¨çš„ï¼›å¦‚æœå‘é€çš„æ˜¯ Noneï¼Œä¼šè°ƒç”¨å­ç”Ÿæˆå™¨çš„__next__()æ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯ Noneï¼Œä¼šè°ƒç”¨å­ç”Ÿæˆå™¨çš„.send()æ–¹æ³•ï¼› 2. å­ç”Ÿæˆå™¨é€€å‡ºçš„æ—¶å€™ï¼Œæœ€åçš„return EXPRï¼Œä¼šè§¦å‘ä¸€ä¸ªStopIteration(EXPR)å¼‚å¸¸ï¼› 3. yield fromè¡¨è¾¾å¼çš„å€¼ï¼Œæ˜¯å­ç”Ÿæˆå™¨ç»ˆæ­¢æ—¶ï¼Œä¼ é€’ç»™StopIterationå¼‚å¸¸çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼› 4. å¦‚æœè°ƒç”¨çš„æ—¶å€™å‡ºç°StopIterationå¼‚å¸¸ï¼Œå§”æ‰˜ç”Ÿæˆå™¨ä¼šæ¢å¤è¿è¡Œï¼ŒåŒæ—¶å…¶ä»–çš„å¼‚å¸¸ä¼šå‘ä¸Š &quot;å†’æ³¡&quot;ï¼› 5. ä¼ å…¥å§”æ‰˜ç”Ÿæˆå™¨çš„å¼‚å¸¸é‡Œï¼Œé™¤äº†GeneratorExitä¹‹å¤–ï¼Œå…¶ä»–çš„æ‰€æœ‰å¼‚å¸¸å…¨éƒ¨ä¼ é€’ç»™å­ç”Ÿæˆå™¨çš„.throw()æ–¹æ³•ï¼›å¦‚æœè°ƒç”¨.throw()çš„æ—¶å€™å‡ºç°äº†StopIterationå¼‚å¸¸ï¼Œé‚£ä¹ˆå°±æ¢å¤å§”æ‰˜ç”Ÿæˆå™¨çš„è¿è¡Œï¼Œå…¶ä»–çš„å¼‚å¸¸å…¨éƒ¨å‘ä¸Š &quot;å†’æ³¡&quot;ï¼› 6. å¦‚æœåœ¨å§”æ‰˜ç”Ÿæˆå™¨ä¸Šè°ƒç”¨.close()æˆ–ä¼ å…¥GeneratorExitå¼‚å¸¸ï¼Œä¼šè°ƒç”¨å­ç”Ÿæˆå™¨çš„.close()æ–¹æ³•ï¼Œæ²¡æœ‰çš„è¯å°±ä¸è°ƒç”¨ã€‚å¦‚æœåœ¨è°ƒç”¨.close()çš„æ—¶å€™æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±å‘ä¸Š &quot;å†’æ³¡&quot;ï¼Œå¦åˆ™çš„è¯å§”æ‰˜ç”Ÿæˆå™¨ä¼šæŠ›å‡ºGeneratorExitå¼‚å¸¸ã€‚ asyncå’Œawait pythonä¸ºäº†å°†è¯­ä¹‰å˜å¾—æ›´åŠ æ˜ç¡®ï¼Œå°±å¼•å…¥äº†asyncå’Œawaitå…³é”®è¯ç”¨äºå®šä¹‰åŸç”Ÿçš„åç¨‹ åŸç”Ÿåç¨‹ä¸èƒ½ä½¿ç”¨next(None)æ–¹æ³•é¢„æ¿€åç¨‹ å¿…é¡»ä½¿ç”¨send(None)æ–¹æ³• ä½¿ç”¨async å…³é”®è¯å®šä¹‰åç¨‹æ–¹æ³• await åªæ¥å—asyncå…³é”®å­—å®šä¹‰çš„åç¨‹æ–¹æ³•æˆ–è€…ä½¿ç”¨@types.coroutineè£…é¥°å™¨è£…é¥°æ–¹æ³•ï¼ˆè¯¥è£…é¥°å™¨åœ¨import typesåŒ…ä¸­ åŒ…è£…æ–¹æ³•å¹¶å®ç°__await__é­”æ³•æ–¹æ³•ï¼‰ ç”Ÿæˆå™¨å®ç°åç¨‹ ä½¿ç”¨import inspectåŒ…ä¸­inspect.getgeneratorstate()è·å–ç”Ÿæˆå™¨çŠ¶æ€ å¦‚ GEN_CREATED GEN_SUSPENDED GEN_CLOSED åç¨‹çš„è°ƒåº¦ä¾ç„¶æ˜¯ äº‹ä»¶å¾ªç¯+åç¨‹æ¨¡å¼ åç¨‹æ˜¯å•çº¿ç¨‹æ¨¡å¼ asyncioå¹¶å‘ç¼–ç¨‹ äº‹ä»¶å¾ªç¯ asyncio #å‚è€ƒjavaä¸­çš„AIO åŒ…å«å„ç§ç‰¹å®šç³»ç»Ÿå®ç°çš„æ¨¡å—åŒ–äº‹ä»¶å¾ªç¯ ä¼ è¾“å’Œåè®®æŠ½è±¡ å¯¹TCP UDP SSL å­è¿›ç¨‹ å»¶æ—¶è°ƒç”¨ä»¥åŠå…¶ä»–çš„å…·ä½“æ”¯æŒ æ¨¡ä»¿futuresæ¨¡å—ä½†é€‚ç”¨äºäº‹ä»¶å¾ªç¯ä½¿ç”¨çš„Futureç±» åŸºäºyield from çš„åè®®å’Œä»»åŠ¡ å¯ä»¥è®©ä½ ç”¨é¡ºåºçš„æ–¹å¼ç¼–å†™å¹¶å‘ä»£ç  å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå°†äº§ç”Ÿé˜»å¡IOçš„è°ƒç”¨æ—¶ æœ‰æ¥å£å¯ä»¥æŠŠè¿™ä¸ªäº‹ä»¶è½¬ç§»åˆ°çº¿ç¨‹æ±  æ¨¡ä»¿threadingæ¨¡å—ä¸­çš„åŒæ­¥åŸè¯­ å¯ä»¥ç”¨åœ¨å•çº¿ç¨‹å†…çš„åç¨‹ä¹‹é—´ ä¸€äº›æ€»ç»“ äº‹ä»¶å¾ªç¯+å›è°ƒï¼ˆé©±åŠ¨ç”Ÿæˆå™¨ï¼‰+epoll(IOå¤šè·¯å¤ç”¨) asyncioæ˜¯pythonç”¨äºè§£å†³å¼‚æ­¥ioç¼–ç¨‹çš„ä¸€æ•´å¥—è§£å†³æ–¹æ¡ˆ tornadoã€geventã€twistedï¼ˆscrapyï¼Œ django channelsï¼‰ torando(å®ç°webæœåŠ¡å™¨)ï¼Œ django+flask(uwsgi, gunicorn+nginx) tornadoå¯ä»¥ç›´æ¥éƒ¨ç½²ï¼Œ nginx+tornado ä¸€äº›ä½¿ç”¨ åœ¨åç¨‹ç¼–ç ä¸­ä¸èƒ½ä½¿ç”¨éå¼‚æ­¥é˜»å¡æ–¹æ³• loop=asyncio.get_event_loop() å¼‚æ­¥äº‹ä»¶å¾ªç¯ å¯ä»¥çœ‹åšåç¨‹æ±  loop.run_until_complete() é˜»å¡æ–¹æ³• ç›´åˆ°åç¨‹æ–¹æ³•æ‰§è¡Œå®Œä¹‹åæ‰å¾€ä¸‹æ‰§è¡Œ å¯ä»¥æ¥æ”¶åç¨‹ç±»å‹ åç¨‹çš„futureç±»å‹ åç¨‹çš„task ç±»å‹ #ç›¸å½“äºå¤šçº¿ç¨‹ä¸­çš„join() asyncio.wait() æ¥æ”¶å¯è¿­ä»£å¼‚æ­¥å¯¹è±¡ asyncio.sleep() å¼‚æ­¥IOçš„sleep éœ€åœ¨å‰è¾¹åŠ awaitå…³é”®å­— è·å–åç¨‹çš„è¿”å›å€¼ asyncio.ensure_future() å†…éƒ¨ä½¿ç”¨loop.create_taskå°†åç¨‹åŒ…è£…æˆtask task.add_done_callback() ä¸ºåç¨‹æ·»åŠ å›è°ƒæ–¹æ³• futureä¼šä½œä¸ºå‚æ•°ä¼ å…¥å›è°ƒå‡½æ•°ä¸­ from functools import partial åå‡½æ•° å¯ä»¥åŒ…è£…å‡½æ•° é‡æ–°å®šä¹‰å‡½æ•°ç­¾å asyncio.wait ç›¸å½“äºå¤šçº¿ç¨‹ä¸­çš„wait å¯ä»¥æŒ‡å®šä½•æ—¶ç»“æŸ asyncio.gather ä¸waitç”¨æ³•ç±»ä¼¼ ä½†å¯ä»¥å°†åç¨‹åˆ†ç»„ ç­‰å¾…ç»„å®Œæˆåç»“æŸ taskå–æ¶ˆå’Œå­åç¨‹è°ƒç”¨åŸç† taskå–æ¶ˆ run_until_complete å†…éƒ¨ä½¿ç”¨run_forever() ä½†ä¸ºfutureæ·»åŠ äº†ä¸ªä¸€ä¸ªå›è°ƒå‡½æ•°future.add_done_callback(_run_until_complete_cb) å½“futureå®Œæˆæ—¶è°ƒç”¨_run_until_complete_cb(fut) åœ¨å…¶ä¸­æ‰§è¡Œfut._loop.stop() å°†äº‹ä»¶å¾ªç¯åœæ­¢ å³å°†äº‹ä»¶åœæ­¢æ ‡è¯†ä¸ºTrue self._stopping = True loopä¼šè¢«æ”¾åˆ°futureä¸­ asyncio.Task.all_tasks() ä»loopä¸­è·å–æ‰€æœ‰task task.cancel() å–æ¶ˆtask è¿”å›Trueå–æ¶ˆæˆåŠŸ è¿”å›Falseå–æ¶ˆå¤±è´¥ loop.stop() åœæ­¢loop loop.run_forever() é‡æ–°è¿è¡Œloop loop.close() æœ€åå…³é—­loop å­åç¨‹è°ƒç”¨ # å‚è€ƒ https://docs.python.org/3/library/asyncio-task.html#example-chain-coroutines ä¸yield fromç›¸åŒ call_soonã€call_atã€call_laterã€call_soon_threadsafe loop.call_soon() å°†å›è°ƒå‡½æ•°åŠ å…¥FIFOé˜Ÿåˆ— å¹¶æŒ‰ç…§æ³¨å†Œé¡ºåºå°½å¯èƒ½çš„å›è°ƒè¿”å› loop.call_at åœ¨loopæŸä¸€æ—¶é—´ç‚¹å›è°ƒ ç”¨åˆ°loop.time() loop.call_later() åœ¨æŒ‡å®šæ—¶é—´åå›è°ƒ loop.call_soon_threadsafe() æ˜¯loop.call_soon() çš„çº¿ç¨‹å®‰å…¨ç‰ˆ ThreadPollExecutor å’Œ asycio å®Œæˆé˜»å¡ IO è¯·æ±‚ loop.run_in_executor(executor, func, *args ) executorä¸ºçº¿ç¨‹æ± å®ä¾‹ funcä¸ºæ”¾å…¥çº¿ç¨‹æ± ä¸­çš„å‡½æ•° *argsä¸ºfuncå‚æ•° è¿”å›task ç„¶åäº¤ç»™loopè¿è¡Œ asyncio æ¨¡æ‹Ÿ http è¯·æ±‚ await asyncio.open_connection(host,port) è¯­å¥ ç­‰å¾…å»ºç«‹è¿æ¥ è¿”å› reader å’Œwriter readerç”¨äºæ¥æ”¶å“åº” writerç”¨äºå‘é€è¯·æ±‚ async for è¯­æ³• å¼‚æ­¥forå¾ªç¯ è°ƒç”¨__anext__é­”æ³•å‡½æ•° asyncio.as_completed(tasks) è¿”å›ä¸€ä¸ªç”±@coroutineä¿®é¥°çš„ _wait_for_one() åç¨‹ å…¶ä¸­æ‰è¿”å› f.result() æ‰€ä»¥forå¾—åˆ°çš„taskå‰éœ€è¦è¦åŠ await ç­‰å¾…è¿”å›ç»“æœ #ä¸å¤šçº¿ç¨‹ç±»ä¼¼ future å’Œ task future ç”±äºåç¨‹çš„å•çº¿ç¨‹çš„åŸå›  è·å–ç»“æœæ—¶æ‰§è¡Œ_schedule_callbacks(self) å…¶ä¸­é€šè¿‡forå¾ªç¯è·å– self._callbacksåˆ—è¡¨ä¸­çš„callback ç„¶åæ‰§è¡Œself._loop.call_soon(callback, self) task Taskæ˜¯Futureçš„å­ç±» æ˜¯åç¨‹å’ŒFutureä¹‹é—´çš„æ¡¥æ¢ taskåœ¨__init__æ—¶è°ƒç”¨__stepé€šè¿‡send(None)é¢„æ¿€äº†åç¨‹ taskæ•è·åœ¨åç¨‹æœ€åreturnæ—¶æŠ›å‡ºçš„StopIterationå¼‚å¸¸ å¹¶é€šè¿‡self.set_result(exc.value)è®¾ç½®è¿”å›ç»“æœ asyncioåŒæ­¥å’Œé€šä¿¡ from asyncio import Lock, Queue ä½¿ç”¨ï¼šawait lock.acquire() æˆ– with await lock æˆ– async with lock with await lock æˆ– async with lock åˆ†åˆ«æ‰§è¡Œçš„æ˜¯__await__å’Œ@coroutineä¿®é¥°çš„__aenter__é­”æ³•å‡½æ•° å‚è€ƒ æ…•è¯¾]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘å–œæ¬¢çš„éŸ³ä¹]]></title>
    <url>%2Fmy-favorite-songs%2F</url>
    <content type="text"><![CDATA[ç»è¿‡æŒºä¹…çš„æ”¶è— ç½‘æ˜“äº‘éŸ³ä¹çš„æ”¶è—ä¹Ÿå¿«ä¸¤ç™¾äº† ä»€ä¹ˆéƒ½æœ‰ æ—¥è¯­å’Œå¥³éŸ³å±…å¤š å¥³æ¯’ ç”µéŸ³ æ…¢æ­Œ å¿«æ­Œ ç©ºçµ å¤é£ çº¯éŸ³ä¹ RainyMood Game(Gal)/åŠ¨ç”»TV(OP/ED/IN/OST/REMIX/è§’è‰²æ­Œ) é¬¼ç•œæ´—è„‘ é‡ä½éŸ³ å¹¿æ’­ï¼ˆCVï¼‰ å°‘é‡V+å’Œç¿»å”±]]></content>
      <categories>
        <category>éŸ³ä¹</category>
      </categories>
      <tags>
        <tag>ç½‘æ˜“äº‘</tag>
        <tag>éŸ³ä¹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç´¢å°¼SVF15326SCBé»‘è‹¹æœå]]></title>
    <url>%2Fhackintosh%2F</url>
    <content type="text"><![CDATA[å› ä¸ºæ—§æœ¬æœ¬åªæœ‰æœºæ¢°ç¡¬ç›˜ æŠŠå…‰é©±ä½æ‹†äº†å å¼„äº†å—SSD äºæ˜¯æƒ³ç€æŠ˜è…¾ä¸€ä¸‹é»‘è‹¹æœ è£…å®Œåå¹¶ä¸å®Œç¾ è¸©äº†ä¸å°‘å‘ ç‹¬æ˜¾å’Œå†…ç½®æ— çº¿ç½‘å¡æŠ˜è…¾äº†å¾ˆä¹…æ— è§£ æ¸…å• æˆ‘çš„CLOVER ç™¾åº¦äº‘ tyhu è½¯ä»¶å·¥å…· Clover Configurator Kext Wizard AppleHDA Patcher MaciASL é©±åŠ¨[1] RealtekRTL8111.kext AppleALC.kext VoodooHDA.kext ACPIBacklight.kext ACPIBatteryManager.kext æˆ‘çš„config.plist è¿™æ˜¯æ‰“è¿‡è¡¥ä¸æˆ–ä¿®æ”¹åçš„æœ€ç»ˆç‰ˆ config.plist ç‚¹å‡»å±•å¼€ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;&lt;plist version="1.0"&gt;&lt;dict&gt; &lt;key&gt;ACPI&lt;/key&gt; &lt;dict&gt; &lt;key&gt;DSDT&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Debug&lt;/key&gt; &lt;false/&gt; &lt;key&gt;ReuseFFFF&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;DropTables&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;Signature&lt;/key&gt; &lt;string&gt;DMAR&lt;/string&gt; &lt;/dict&gt; &lt;/array&gt; &lt;key&gt;SSDT&lt;/key&gt; &lt;dict&gt; &lt;key&gt;DropOem&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Generate&lt;/key&gt; &lt;dict&gt; &lt;key&gt;APLF&lt;/key&gt; &lt;true/&gt; &lt;key&gt;APSN&lt;/key&gt; &lt;true/&gt; &lt;key&gt;CStates&lt;/key&gt; &lt;true/&gt; &lt;key&gt;PStates&lt;/key&gt; &lt;true/&gt; &lt;key&gt;PluginType&lt;/key&gt; &lt;true/&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;key&gt;Boot&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Arguments&lt;/key&gt; &lt;string&gt;dart=0 -xcpm nv_disable=1 kext-dev-mode=1&lt;/string&gt; &lt;key&gt;Debug&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Legacy&lt;/key&gt; &lt;string&gt;LegacyBiosDefault&lt;/string&gt; &lt;key&gt;Secure&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Timeout&lt;/key&gt; &lt;integer&gt;5&lt;/integer&gt; &lt;key&gt;XMPDetection&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;CPU&lt;/key&gt; &lt;dict&gt; &lt;key&gt;UseARTFrequency&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;Devices&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Audio&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Inject&lt;/key&gt; &lt;string&gt;3&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;FakeID&lt;/key&gt; &lt;dict&gt; &lt;key&gt;IntelGFX&lt;/key&gt; &lt;string&gt;0x04128086&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;SetIntelBacklight&lt;/key&gt; &lt;true/&gt; &lt;key&gt;USB&lt;/key&gt; &lt;dict&gt; &lt;key&gt;AddClockID&lt;/key&gt; &lt;true/&gt; &lt;key&gt;FixOwnership&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Inject&lt;/key&gt; &lt;true/&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;key&gt;GUI&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Custom&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Entries&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;Disabled&lt;/key&gt; &lt;false/&gt; &lt;key&gt;FullTitle&lt;/key&gt; &lt;string&gt;UEFI Internal&lt;/string&gt; &lt;key&gt;Hidden&lt;/key&gt; &lt;string&gt;Always&lt;/string&gt; &lt;key&gt;Ignore&lt;/key&gt; &lt;false/&gt; &lt;key&gt;NoCaches&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Type&lt;/key&gt; &lt;string&gt;Other&lt;/string&gt; &lt;/dict&gt; &lt;/array&gt; &lt;/dict&gt; &lt;key&gt;Language&lt;/key&gt; &lt;string&gt;en:0&lt;/string&gt; &lt;key&gt;Mouse&lt;/key&gt; &lt;dict&gt; &lt;key&gt;DoubleClick&lt;/key&gt; &lt;integer&gt;500&lt;/integer&gt; &lt;key&gt;Enabled&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Mirror&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Speed&lt;/key&gt; &lt;integer&gt;8&lt;/integer&gt; &lt;/dict&gt; &lt;key&gt;Scan&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Entries&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Legacy&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Linux&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Tool&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;key&gt;Graphics&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Inject&lt;/key&gt; &lt;dict&gt; &lt;key&gt;ATI&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Intel&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NVidia&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;NvidiaSingle&lt;/key&gt; &lt;false/&gt; &lt;key&gt;ig-platform-id&lt;/key&gt; &lt;string&gt;0x0a260006&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;KernelAndKextPatches&lt;/key&gt; &lt;dict&gt; &lt;key&gt;AppleIntelCPUPM&lt;/key&gt; &lt;true/&gt; &lt;key&gt;AppleRTC&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Debug&lt;/key&gt; &lt;false/&gt; &lt;key&gt;DellSMBIOSPatch&lt;/key&gt; &lt;false/&gt; &lt;key&gt;KernelCpu&lt;/key&gt; &lt;true/&gt; &lt;key&gt;KernelLapic&lt;/key&gt; &lt;false/&gt; &lt;key&gt;KernelPm&lt;/key&gt; &lt;true/&gt; &lt;key&gt;KernelXCPM&lt;/key&gt; &lt;false/&gt; &lt;key&gt;KextsToPatch&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;Comment&lt;/key&gt; &lt;string&gt;Enable Trim on SSD&lt;/string&gt; &lt;key&gt;Disabled&lt;/key&gt; &lt;false/&gt; &lt;key&gt;Find&lt;/key&gt; &lt;data&gt; QVBQTEUgU1NE &lt;/data&gt; &lt;key&gt;Name&lt;/key&gt; &lt;string&gt;IOAHCIBlockStorage&lt;/string&gt; &lt;key&gt;Replace&lt;/key&gt; &lt;data&gt; AAAAAAAAAAAA &lt;/data&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;Comment&lt;/key&gt; &lt;string&gt;Boot graphics glitch, 10.10.x/10.11.x (credit lisai9093, cecekpawon)&lt;/string&gt; &lt;key&gt;Disabled&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Find&lt;/key&gt; &lt;data&gt; AQAAdRc= &lt;/data&gt; &lt;key&gt;Name&lt;/key&gt; &lt;string&gt;com.apple.iokit.IOGraphicsFamily&lt;/string&gt; &lt;key&gt;Replace&lt;/key&gt; &lt;data&gt; AQAA6xc= &lt;/data&gt; &lt;/dict&gt; &lt;/array&gt; &lt;/dict&gt; &lt;key&gt;RtVariables&lt;/key&gt; &lt;dict&gt; &lt;key&gt;BooterConfig&lt;/key&gt; &lt;string&gt;0x28&lt;/string&gt; &lt;key&gt;CsrActiveConfig&lt;/key&gt; &lt;string&gt;0x67&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;SMBIOS&lt;/key&gt; &lt;dict&gt; &lt;key&gt;BiosReleaseDate&lt;/key&gt; &lt;string&gt;10/18/13&lt;/string&gt; &lt;key&gt;BiosVendor&lt;/key&gt; &lt;string&gt;Apple Inc.&lt;/string&gt; &lt;key&gt;BiosVersion&lt;/key&gt; &lt;string&gt;MBP112.88Z.0138.B02.1310181745&lt;/string&gt; &lt;key&gt;Board-ID&lt;/key&gt; &lt;string&gt;Mac-3CBD00234E554E41&lt;/string&gt; &lt;key&gt;BoardManufacturer&lt;/key&gt; &lt;string&gt;Apple Inc.&lt;/string&gt; &lt;key&gt;BoardSerialNumber&lt;/key&gt; &lt;string&gt;C023118TUDJ3Q&lt;/string&gt; &lt;key&gt;BoardType&lt;/key&gt; &lt;integer&gt;10&lt;/integer&gt; &lt;key&gt;ChassisAssetTag&lt;/key&gt; &lt;string&gt;MacBook-Aluminum&lt;/string&gt; &lt;key&gt;ChassisManufacturer&lt;/key&gt; &lt;string&gt;Apple Inc.&lt;/string&gt; &lt;key&gt;ChassisType&lt;/key&gt; &lt;string&gt;8&lt;/string&gt; &lt;key&gt;Family&lt;/key&gt; &lt;string&gt;MacBook Pro&lt;/string&gt; &lt;key&gt;Manufacturer&lt;/key&gt; &lt;string&gt;Apple Inc.&lt;/string&gt; &lt;key&gt;Memory&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Channels&lt;/key&gt; &lt;integer&gt;1&lt;/integer&gt; &lt;key&gt;Modules&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;Frequency&lt;/key&gt; &lt;integer&gt;1600&lt;/integer&gt; &lt;key&gt;Part&lt;/key&gt; &lt;string&gt;CE M471B5173QH0-YK0&lt;/string&gt; &lt;key&gt;Serial&lt;/key&gt; &lt;string&gt;19342E80&lt;/string&gt; &lt;key&gt;Size&lt;/key&gt; &lt;integer&gt;4096&lt;/integer&gt; &lt;key&gt;Slot&lt;/key&gt; &lt;integer&gt;0&lt;/integer&gt; &lt;key&gt;Type&lt;/key&gt; &lt;string&gt;DDR3&lt;/string&gt; &lt;key&gt;Vendor&lt;/key&gt; &lt;string&gt;kingston&lt;/string&gt; &lt;/dict&gt; &lt;dict&gt; &lt;key&gt;Frequency&lt;/key&gt; &lt;integer&gt;1600&lt;/integer&gt; &lt;key&gt;Part&lt;/key&gt; &lt;string&gt;CE M471B5173QH0-YK0&lt;/string&gt; &lt;key&gt;Serial&lt;/key&gt; &lt;string&gt;14CFE8BB&lt;/string&gt; &lt;key&gt;Size&lt;/key&gt; &lt;integer&gt;4096&lt;/integer&gt; &lt;key&gt;Slot&lt;/key&gt; &lt;integer&gt;1&lt;/integer&gt; &lt;key&gt;Type&lt;/key&gt; &lt;string&gt;DDR3&lt;/string&gt; &lt;key&gt;Vendor&lt;/key&gt; &lt;string&gt;kingston&lt;/string&gt; &lt;/dict&gt; &lt;/array&gt; &lt;key&gt;SlotCount&lt;/key&gt; &lt;integer&gt;2&lt;/integer&gt; &lt;/dict&gt; &lt;key&gt;Mobile&lt;/key&gt; &lt;true/&gt; &lt;key&gt;ProductName&lt;/key&gt; &lt;string&gt;MacBookPro11,2&lt;/string&gt; &lt;key&gt;SerialNumber&lt;/key&gt; &lt;string&gt;C02L5Q0RFD56&lt;/string&gt; &lt;key&gt;Trust&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Version&lt;/key&gt; &lt;string&gt;1.0&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;SystemParameters&lt;/key&gt; &lt;dict&gt; &lt;key&gt;InjectKexts&lt;/key&gt; &lt;string&gt;Detect&lt;/string&gt; &lt;/dict&gt;&lt;/dict&gt;&lt;/plist&gt; æœ‰çº¿ç½‘å¡ ç½‘å¡åœ¨è£…å®Œé»‘è‹¹æœä¹‹åå°±èƒ½ç”¨äº† ç”¨çš„ RealtekRTL8111.kexté©±åŠ¨ æ”¾åˆ°EFI/CLOVER/kexts/xxx/ä¸‹å°±è¡Œ å£°å¡ é»‘åå‘ç° å£°å¡å¹¶ä¸èƒ½ä½¿ç”¨ ç„¶åæ‰¾éäº†é©±åŠ¨ AppleALC.kext å®‰è£…AppleALC.kext å¯ä»¥ç”¨Kext Wizardå®‰è£…åˆ°ç³»ç»Ÿä¸­ ä½†æ¨èç›´æ¥å°†é©±åŠ¨æ–‡ä»¶æ”¾å…¥EFI/CLOVER/kexts/xxx/é©±åŠ¨æ–‡ä»¶å¤¹ä¸­ è®¾ç½®layout ä½¿ç”¨Clover Configuratorè®¾ç½®Devices-Audio-Injectä¸º3[2] ä¿®å¤ HPET ä½¿ç”¨Clover Configuratorå‹¾é€‰Acpi-Fixes-FixHPETé€‰é¡¹ å®‰è£…åå£°å¡è™½ç„¶å¯ä»¥ä½¿ç”¨äº† ä½†æ˜¯åæ¥å‘ç°å£°éŸ³è¾“å…¥æ— ç”µå¹³ QQå¼€è¯­éŸ³ä¼šå¼ºåˆ¶é‡å¯ ç¡çœ å”¤é†’åæ— æ³•ä½¿ç”¨çš„æƒ…å†µ åæ¥æ”¹ç”¨VoodooHDA.kexté©±åŠ¨ VoodooHDA.kext å®‰è£…VoodooHDA.kext ç›´æ¥å°†VoodooHDA.kexté©±åŠ¨æ‹–è¿›cloverçš„EFI/CLOVER/kexts/xxx/é©±åŠ¨æ–‡ä»¶å¤¹ä¸­å³å¯ å¯èƒ½éœ€è¦çš„é¢å¤–æ“ä½œ å°†VoodooHdaSettingsLoaderåŠ å…¥ç™»å½•é¡¹ å®‰è£…AppleHDADisabler.kexté©±åŠ¨ å®‰è£…VoodooHDA.prefPaneç³»ç»Ÿåå¥½è®¾ç½® AppleHDA.kext ç¬¬ä¸‰ç§æ–¹æ¡ˆ è™½ç„¶å¯è¡Œ ä½†æ˜¯è²Œä¼¼æ²¡æœ‰VoodooHDA.kextå¥½ä½¿ ä½¿ç”¨AppleHDA Patcherç»™åŸç”ŸAppleHDA.kexté©±åŠ¨æ‰“è¡¥ä¸[3] æ³¨æ„å¤‡ä»½åŸå§‹AppleHDA.kexté©±åŠ¨ æ˜¾å¡ é›†æ˜¾è™½ç„¶æ­£å¸¸ä½¿ç”¨ ä½†æ˜¯è¿˜æœ‰äº›ç»†èŠ‚ä¸å®Œç¾ æ— æ³•è°ƒèŠ‚äº®åº¦ ä¼‘çœ å”¤é†’åé»‘å± äº®åº¦è°ƒèŠ‚DSDTè¡¥ä¸[4] è¿™é‡Œä½¿ç”¨çš„æ˜¯RehabMançš„[igpu]Haswell HD4400/HD4600/HD5000è¡¥ä¸ è·å–ç³»ç»ŸDSDTæ–‡ä»¶ ä½¿ç”¨cloverå¼•å¯¼ç•Œæå– åœ¨cloverå¼•å¯¼ç•Œé¢æŒ‰F4ä¼šå°†æ‰€æœ‰ACPIç›¸å…³çš„æ–‡ä»¶æå–åˆ°EFI/CLOVER/ACPI/originä¸­ æ‰¾åˆ°DSDT.amlæ–‡ä»¶ ä½¿ç”¨MaciASLæå– æ‰“å¼€MaciASL åœ¨èœå•æ File-Now From ACPI-DSDT ä¿®æ”¹åå¦å­˜ä¸ºï¼ˆSave Asï¼‰å³å¯ ç»™DSDTæ‰“è¡¥ä¸ ç»™MaciASLæ·»åŠ Sources æ‰“å¼€MaciASLè®¾ç½® MaciASL-Preferences-Sources åœ¨Patch Sourcesä¸­æ·»åŠ ä¸€ä¸ªSources Nameä¸ºRehabMan Laptop(éšæ„) URLä¸ºhttp://raw.github.com/RehabMan/Laptop-DSDT-Patch/master æ‰“è¡¥ä¸ å°†æå–å‡ºæ¥çš„DSDT.amlæ‹–è¿›MaciASLç„¶åç¼–è¾‘ ç‚¹å‡»PatchæŒ‰é’®æ‰¾åˆ°RehabMan Laptop-[igpu]Haswell HD4400/HD4600/HD5000 é€‰ä¸­åç‚¹å‡»Apply å†ç‚¹å‡»Closeå›åˆ°MaciASLä¸»ç•Œé¢ ç‚¹å‡»Compileç¼–è¾‘ æ·»åŠ è¡¥ä¸åçš„DSDT.amlåˆ°EFI å°†è¡¥ä¸åçš„DSDT.amlæ”¾è‡³EFI/CLOVER/ACPI/patchedä¸­å³å¯ å¯èƒ½éœ€è¦çš„é¢å¤–æ“ä½œ å®‰è£…ACPIBacklight.kexté©±åŠ¨ ä¿®å¤ä¼‘çœ å”¤é†’åé»‘å± ä¼‘çœ å”¤é†’åé»‘å±å…¶å®æ˜¯å±å¹•äº®åº¦è°ƒåˆ°äº†æœ€ä½ ä½¿ç”¨Clover Configuratorå‹¾é€‰Devices-Properties-SetIntelBacklight å†…å­˜ å†…å­˜æ²¡ä»€ä¹ˆå¤§é—®é¢˜ å°±æ˜¯åœ¨å…³äºæœ¬æœºä¸­æ˜¾ç¤ºä¹±ç ï¼ˆå°±æ˜¯æœ‰ç‚¹å¼ºè¿«ç—‡ï¼‰ ä½¿ç”¨Clover Configuratoråœ¨SMBIOS-Memoryä¸­æ·»åŠ å†…å­˜å…ˆå…³ä¿¡æ¯å³å¯ï¼š è¿™äº›å†…å­˜æ¡ä¿¡æ¯å¯ä»¥ç”¨é²å¤§å¸ˆæˆ–è€…GPU-ZæŸ¥çœ‹ å‚æ•° è¯´æ˜ æ —å­ğŸŒ° Slot å†…å­˜æ¡æ’æ§½ä½ 0 Size å†…å­˜æ¡å¤§å°ï¼ˆMBï¼‰ 4096 Frequency å†…å­˜é¢‘ç‡ï¼ˆMhzï¼‰ 1600 Vendor å†…å­˜æ¡å‚å•† kingston Part å†…å­˜æ¡å‹å· CE M471B5173QH0-YK0 Serial å†…å­˜æ¡åºåˆ—å· 19342E80 Type å†…å­˜æ¡è§„æ ¼ DDR3 Channels æ˜¯å¦å¤šé€šé“ Single Channel SlotCount å†…å­˜æ¡æ•° 2 æ— çº¿ç½‘å¡ ç”±äºå†…ç½®ç½‘å¡æ— è§£ åªèƒ½ç”¨USBç½‘å¡ æˆ‘ç”¨çš„æ˜¯EP-N8508GS åˆ°å®˜æ–¹ä¸‹è½½Macé©±åŠ¨å®‰è£…åŒ…å®‰è£…å³å¯ ç”µæ±  é»‘åæ— æ³•æ˜¾ç¤ºç”µæ± ç”µé‡ æ‰“è¡¥ä¸ å’Œç»™æ˜¾å¡æ‰“è¡¥ä¸ä¸€æ · åŒæ · ä½¿ç”¨çš„æ˜¯RehabMançš„[bat]Sony VAIO SVEè¡¥ä¸ å®‰è£…é©±åŠ¨ ç”µæ± é©±åŠ¨ä½¿ç”¨çš„æ˜¯RehabMançš„ACPIBatteryManager.kext æ”¾å…¥EFI/CLOVER/kexts/xxx/é©±åŠ¨æ–‡ä»¶å¤¹ä¸­å³å¯ å‚è€ƒ é©±åŠ¨ä¸‹è½½ â†©ï¸ layoutå‚è€ƒ â†©ï¸ AppleHDAå‚è€ƒ â†©ï¸ äº®åº¦è°ƒèŠ‚ â†©ï¸]]></content>
      <categories>
        <category>æ‰‹è®°</category>
      </categories>
      <tags>
        <tag>é»‘è‹¹æœ</tag>
        <tag>æŠ˜è…¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ŠThinking in javaã€‹è¯»ä¹¦ç¬”è®°]]></title>
    <url>%2Fthinking-in-java%2F</url>
    <content type="text"><![CDATA[ã€ŠThinking in javaã€‹çš„è¯»ä¹¦ç¬”è®° æŒç»­å¹¶æ…¢æ…¢åœ°æ›´æ–°ç€ æœ¬ç¬”è®°ä»…ä½œä¸ºä¸ªäººç¬”è®° å†…å®¹å¯èƒ½å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰ç¾¤ä½“ å±äºæ€»ç»“æ€§è´¨ éœ€è¦è¯¦ç»†å†…å®¹å°±å»ä¹°æœ¬ä¹¦å¹¶æ”¯æŒä¸€ä¸‹å§ ä¸€æœ¬å¥½ä¹¦çš„çµé­‚åœ¨äºæœ‰æ€æƒ³ ç¬¬13ç«  å­—ç¬¦ä¸² 13.1 ä¸å¯å˜String Stringå¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚Stringç±»ä¸­æ¯ä¸€ä¸ªçœ‹èµ·æ¥ä¿®æ”¹Stringå€¼çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„Stringå¯¹è±¡ï¼Œä»¥åŒ…å«ä¿®æ”¹åçš„å­—ç¬¦ä¸²å†…å®¹ã€‚è€Œæœ€åˆçš„Stringå¯¹è±¡å€¼ä¸å˜ã€‚]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>è¯»ä¹¦</tag>
        <tag>thinking</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSHçš„ç®€å•ä½¿ç”¨]]></title>
    <url>%2Fusage-of-the-ssh%2F</url>
    <content type="text"><![CDATA[sshå…å¯†ç ç™»å…¥ ç”Ÿæˆå¯†é’¥ 123$ ssh-keygen [-t dsa | ecdsa | ed25519 | rsa | rsa1] //åŠ å¯†æ–¹å¼ [-C comment] //æ³¨é‡Š [-f output_keyfile] //å¯†é’¥æ–‡ä»¶ä¿å­˜ä½ç½® å¦‚ä¸åšå…¶ä»–è®¾ç½®ä¸€è·¯å›è½¦å³å¯ ç”Ÿæˆå¯†é’¥åæ‰¾åˆ°å¯†é’¥æ–‡ä»¶ å¦‚æœªè®¾ç½®ä¿å­˜è·¯å¾„ åˆ™é»˜è®¤ä¿å­˜åœ¨ ~/.ssh/ åŒ…æ‹¬id_[-t dsa | ecdsa | ed25519 | rsa | rsa1] å’Œid_[-t dsa | ecdsa | ed25519 | rsa | rsa1].pubæ–‡ä»¶ å°†å…¬é’¥ä¸Šä¼ è‡³è¿œç¨‹linuxæœåŠ¡å™¨ å°†id_xxx.pubæ–‡ä»¶ä¸­çš„å†…å®¹è¿½åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨~/.ssh/authorized_keysæ–‡ä»¶ä¸­ æ²¡æœ‰åˆ™è‡ªè¡Œåˆ›å»º æ³¨ ~ä¸ºuser home ssh-copy-id ssh-copy-idå‘½ä»¤å¯ä»¥æŠŠæœ¬åœ°ä¸»æœºçš„å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºçš„authorized_keysæ–‡ä»¶ä¸Šï¼Œssh-copy-idå‘½ä»¤ä¹Ÿä¼šç»™è¿œç¨‹ä¸»æœºçš„ç”¨æˆ·ä¸»ç›®å½•ï¼ˆhomeï¼‰å’Œ~/.ssh, å’Œ~/.ssh/authorized_keysè®¾ç½®åˆé€‚çš„æƒé™ã€‚ 12$ ssh-copy-id [-i [identity_file]] //æœ¬åœ°çš„sshå…¬é’¥æ–‡ä»¶è·¯å¾„ [user@]hostname //è¿œç¨‹ä¸»æœº scp scpå‘½ä»¤ç”¨äºåœ¨Linuxä¸‹è¿›è¡Œè¿œç¨‹æ‹·è´æ–‡ä»¶çš„å‘½ä»¤ï¼Œå’Œå®ƒç±»ä¼¼çš„å‘½ä»¤æœ‰cpï¼Œä¸è¿‡cpåªæ˜¯åœ¨æœ¬æœºè¿›è¡Œæ‹·è´ä¸èƒ½è·¨æœåŠ¡å™¨ï¼Œè€Œä¸”scpä¼ è¾“æ˜¯åŠ å¯†çš„ã€‚ 123$ scp [-i identity_file] //æœ¬åœ°sshå…¬é’¥æ–‡ä»¶ [-P port] //è¿œç¨‹ç«¯å£ [[user@]host1:]file //æŒ‡å®šè¿œç¨‹è·¯å¾„ ç„¶åå°†å…¬é’¥å†…å®¹è¿½åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨~/.ssh/authorized_keysæ–‡ä»¶ä¸­ 1$ cat id_xxx.pub &gt;&gt; ~/.ssh/authorized_keys æ‰‹åŠ¨ åœ¨æœ¬åœ°ctrl+cå¤åˆ¶id_xxx.pubä¸­çš„å¯†é’¥ ç„¶ååœ¨æœåŠ¡å™¨ç«¯ï¼š 1$ echo "ctrl+v" &gt;&gt; ~/.ssh/authorized_keys ç™»å½• 12ssh [-p port] //è¿œç¨‹ç«¯å£ [user@]hostname //ç™»å½•ç”¨æˆ·åå’Œè¿œç¨‹ä¸»æœº å‚è€ƒ ArchWiki linuxde]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¿ƒæ„¿]]></title>
    <url>%2Fwishes%2F</url>
    <content type="text"><![CDATA[æƒ³è¦ä¹°å’Œè¯»çš„ä¹¦ [x] ã€ŠThink In Javaã€‹ [ ] ã€ŠEffective Javaã€‹ [ ] ã€ŠHadoopæƒå¨æŒ‡å—ã€‹ [ ] ã€ŠDeep Learning æ·±åº¦å­¦ä¹ ã€‹ é…ä»¶ [ ] ç»„è£…åŒå±å‡é™æ˜¾ç¤ºå™¨ [ ] MBP [ ] ä¸€åªçŒ«ï¼ˆæˆ‘ä¸€å®šä¼šæœ‰çŒ«çš„!ï¼ˆæœ‰ç”Ÿä¹‹å¹´QWQ]]></content>
      <categories>
        <category>æƒ³</category>
      </categories>
      <tags>
        <tag>ä¹¦</tag>
        <tag>é…ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new "My New Post" More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
